"use strict";!function(t){var a={fade:250,position:"bottom",callback:function(a){t.log("new color="+a)}};function n(t,a,n){var e,r,o,i,c,s,l,u,d,f,p=function(t){var a=/^rgb\((.*?),(.*?),(.*?)\)/;return 7===t.length?[parseInt("0x"+t.substring(1,3))/255,parseInt("0x"+t.substring(3,5))/255,parseInt("0x"+t.substring(5,7))/255]:4===t.length?[parseInt("0x"+t.substring(1,2))/15,parseInt("0x"+t.substring(2,3))/15,parseInt("0x"+t.substring(3,4))/15]:a.test(t)?[parseFloat(t.replace(a,"$1")/255),parseFloat(t.replace(a,"$2")/255),parseFloat(t.replace(a,"$3")/255)]:t}(t);return(u=(e=p)[0],d=e[1],f=e[2],r=Math.min(u,Math.min(d,f)),i=(o=Math.max(u,Math.max(d,f)))-r,s=0,(l=(r+o)/2)>0&&l<1&&(s=i/(l<.5?2*l:2-2*l)),c=0,i>0&&(o===u&&o!==d&&(c+=(d-f)/i),o===d&&o!==f&&(c+=2+(f-u)/i),o===f&&o!==u&&(c+=4+(u-d)/i),c/=6),[c,s,l])[2]>.5?a||"#000":n||"#FFF"}function e(a,e){var r,o=e.val();function i(t){var a=n(t);e.val(t).css({"background-color":t,color:a})}return r=t.farbtastic(a).linkTo(i),o&&(i(o),r.setColor(o)),r}t((function(){var n=t("#colorpicker");0===n.length&&(n=t('<div class="ui-component-content ui-widget-content ui-hidden ui-helper-hidden" id="colorpicker"></div>').appendTo("body")),t(".jqFarbtastic:not(.jqInitedFarbtastic)").livequery((function(){var r,o=t(this),i=t.extend({},a,o.data(),o.metadata());o.addClass("jqInitedFarbtastic"),r=e(n,o),o.on("click",(function(){var t,a;function c(){var e;0===o.length&&a?window.clearInterval(a):(e=o.offset(),"left"===i.position&&(e.left+=o.outerWidth()),"bottom"===i.position&&(e.top+=o.outerHeight()),t&&t.top===e.top&&t.left===e.left||(t=e,n.css({top:e.top,left:e.left})))}r=e(n,o),c(),a=window.setInterval(c,500),n.farbtastic().fadeIn(i.fade)})).on("blur",(function(){n.farbtastic().hide(),"function"==typeof i.callback&&i.callback.call(r,r.color)}))}))})),t((function(){var a={dark:"#000",light:"#fff"};t(".jqFarbtasticFG:not(.jqInitedFarbtasticFG)").livequery((function(){var e=t(this),r=t.extend({},a,e.metadata(),e.data()),o=n(e.css("background-color"),r.dark,r.light);e.addClass("jqInitedFarbtastic").css({color:o})}))}))}(jQuery);
