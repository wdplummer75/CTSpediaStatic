<!DOCTYPE html><html lang="en">
<head>
<title>FormattedSearch &lt; System &lt; Foswiki</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.5, user-scalable=yes" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<link rel="icon" href="../MISSING RESOURCE System/FormattedSearch/favicon.ico" type="image/x-icon"> <link href="../MISSING RESOURCE System/FormattedSearch/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link title="edit FormattedSearch" href="FormattedSearch.html" rel="alternate" type="application/x-wiki">
<meta name="description" content="FormattedSearch" />
<link type="text/css" href="JQueryPlugin.attachments/plugins/animate/animate.css?version=3.7.0" class="head JQUERYPLUGIN::ANIMATE" media="all" rel="stylesheet"><!--JQUERYPLUGIN::ANIMATE-->
<link type="text/css" href="JQueryPlugin.attachments/plugins/button/jquery.button.css?version=2.2" class="head JQUERYPLUGIN::BUTTON" media="all" rel="stylesheet"><!--JQUERYPLUGIN::BUTTON: requires= missing ids: JQUERYPLUGIN::FORM-->
<link href="JQueryPlugin.attachments/plugins/tabpane/jquery.tabpane.css?version=2.10" class="head JQUERYPLUGIN::TABPANE" media="all" rel="stylesheet" type="text/css"><!--JQUERYPLUGIN::TABPANE-->
<link type="text/css" href="SmiliesPlugin.attachments/smilies.css" rel="stylesheet" media="all" class="head SMILIESPLUGIN"><!--SMILIESPLUGIN-->
<style class='head TABLEPLUGIN_default' type="text/css" media="all">
body .foswikiTable {border-width:1px}
body .foswikiTable .tableSortIcon img {padding-left:.3em; vertical-align:text-bottom}
body .foswikiTable td {border-style:solid none; vertical-align:top}
body .foswikiTable th {border-style:none solid; vertical-align:top; background-color:#d6d3cf; color:#000000}
body .foswikiTable th a:link {color:#000000}
body .foswikiTable th a:visited {color:#000000}
body .foswikiTable th a:hover {color:#000000; background-color:#d6d3cf}
body .foswikiTable th.foswikiSortedCol {background-color:#c4c1ba}
body .foswikiTable tr.foswikiTableRowdataBg0 td {background-color:#ffffff}
body .foswikiTable tr.foswikiTableRowdataBg0 td.foswikiSortedCol {background-color:#f7f7f6}
body .foswikiTable tr.foswikiTableRowdataBg1 td {background-color:#f7f7f6}
body .foswikiTable tr.foswikiTableRowdataBg1 td.foswikiSortedCol {background-color:#f0f0ee}
</style><!--TABLEPLUGIN_default-->
<script class="script JQUERYPLUGIN" src="JQueryPlugin.attachments/jquery-2.2.4.js"></script><!--JQUERYPLUGIN-->
<script class="script JQUERYPLUGIN::OBSERVER" src="JQueryPlugin.attachments/plugins/observer/observer.js?version=0.1"></script><!--JQUERYPLUGIN::OBSERVER-->
<script class="script JQUERYPLUGIN::BROWSER" src="JQueryPlugin.attachments/plugins/browser/jquery.browser.js?version=0.1.0"></script><!--JQUERYPLUGIN::BROWSER-->
<script src="JQueryPlugin.attachments/plugins/migrate/jquery.migrate.js?version=3.3.1" class="script JQUERYPLUGIN::MIGRATE"></script><!--JQUERYPLUGIN::MIGRATE-->
<script class="script JQUERYPLUGIN::FOSWIKI" src="JQueryPlugin.attachments/plugins/foswiki/jquery.foswiki.js?version=3.01"></script><!--JQUERYPLUGIN::FOSWIKI-->
<script src="JQueryPlugin.attachments/plugins/animate/animate.js?version=3.7.0" class="script JQUERYPLUGIN::ANIMATE"></script><!--JQUERYPLUGIN::ANIMATE-->
<script src="JQueryPlugin.attachments/plugins/metadata/jquery.metadata.js?version=2.1ef2bb44c86f5d0e98d55" class="script JQUERYPLUGIN::METADATA"></script><!--JQUERYPLUGIN::METADATA-->
<script class="script JQUERYPLUGIN::BUTTON" src="JQueryPlugin.attachments/plugins/button/jquery.button.init.js?version=2.2"></script><!--JQUERYPLUGIN::BUTTON: requires= missing ids: JQUERYPLUGIN::FORM-->
<script class="script JQUERYPLUGIN::CHILI" src="JQueryPlugin.attachments/plugins/chili/jquery.chili.js?version=2.2_1"></script>
<script src="JQueryPlugin.attachments/plugins/chili/jquery.chili.init.js?version=2.2_1" class="script JQUERYPLUGIN::CHILI"></script><!--JQUERYPLUGIN::CHILI-->
<script src="JQueryPlugin.attachments/plugins/easing/jquery.easing.js?version=1.3" class="script JQUERYPLUGIN::EASING"></script><!--JQUERYPLUGIN::EASING-->
<script class='script JQUERYPLUGIN::FOSWIKI::PREFERENCES foswikiPreferences' type='text/json'>{
   "SERVERTIME" : "08 Feb 2023 - 15:51",
   "TOPIC" : "FormattedSearch",
   "USERSWEB" : "Main",
   "WIKIUSERNAME" : "Main.WikiAdmin",
   "USERNAME" : "WikiAdmin",
   "PUBURLPATH" : "/foswiki/pub",
   "NAMEFILTER" : "[\\\\\\s*?~^$@%`\"'&|<:;>\\[\\]#\\x00-\\x1f]",
   "SCRIPTURLPATHS" : {},
   "WEB" : "System",
   "COOKIEREALM" : "",
   "PUBURL" : "http://biostat1478.dhcp.mc.vanderbilt.edu/foswiki/pub",
   "URLHOST" : "http://biostat1478.dhcp.mc.vanderbilt.edu",
   "SCRIPTURL" : "http://biostat1478.dhcp.mc.vanderbilt.edu/foswiki/bin",
   "SYSTEMWEB" : "System",
   "SCRIPTSUFFIX" : "",
   "SCRIPTURLPATH" : "/foswiki/bin",
   "SKIN" : "natedit,pattern",
   "WIKINAME" : "WikiAdmin"
}
</script><!--JQUERYPLUGIN::FOSWIKI::PREFERENCES-->
<script src="JQueryPlugin.attachments/plugins/loader/jquery.loader.js?version=4.60" class="script JQUERYPLUGIN::LOADER"></script><!--JQUERYPLUGIN::LOADER-->
<script class="script JQUERYPLUGIN::TABPANE" src="JQueryPlugin.attachments/plugins/tabpane/jquery.tabpane.js?version=2.10"></script><!--JQUERYPLUGIN::TABPANE-->
</head>
<body>
<h1 id="Formatted_Search">  Formatted Search </h1>
Customize the display of search results.
<p></p>
The default output format of a <code><a href="VarSEARCH.html">%SEARCH{...}%</a></code> is a table consisting of topic names and topic summaries. Use the <code>format="..."</code> parameter to customize the search result. The format parameter typically defines a bullet or a table row containing macros, such as <code>%SEARCH{ "food" format="| $topic | $summary |" }%</code>. See <code><a href="VarSEARCH.html">%SEARCH{...}%</a></code> for other search parameters, such as <code>separator=""</code>.
<p></p>
<div class="foswikiToc" id="foswikiTOC"><span class="foswikiTocTitle">On this page:</span> <ul>
<li> <a href="#Syntax"> Syntax </a> <ul>
<li> <a href="#A_1._61header_61_34..._34_61_parameter"> 1. header="..." parameter </a>
</li> <li> <a href="#A_2._61footer_61_34..._34_61_parameter"> 2. footer="..." parameter </a>
</li> <li> <a href="#A_3._61pagerformat_61_34..._34_61_parameter"> 3. pagerformat="..." parameter </a>
</li> <li> <a href="#A_4._61format_61_34..._34_61_parameter"> 4. format="..." parameter </a>
</li></ul> 
</li> <li> <a href="#Using_36extract_and_36pattern"> Using $extract and $pattern </a>
</li> <li> <a href="#Examples"> Examples </a> <ul>
<li> <a href="#Search_showing_topic_name_and_summary"> Search showing topic name and summary </a>
</li> <li> <a href="#Table_showing_form_field_values_of_topics_with_a_form"> Table showing form field values of topics with a form </a>
</li> <li> <a href="#Extract_some_text_from_a_topic_using_regular_expression"> Extract some text from a topic using regular expression </a>
</li> <li> <a href="#Nested_Search"> Nested Search </a> <ul>
<li> <a href="#Standard_form"> Standard form </a> <ul>
<li> <a href="#Step_45by_45Step_Example"> Step-by-Step Example </a>
</li></ul> 
</li> <li> <a href="#Delayed_form"> Delayed form </a> <ul>
<li> <a href="#Step_45by_45Step_Example_AN1"> Step-by-Step Example </a>
</li></ul> 
</li> <li> <a href="#Worked_example"> Worked example </a> <ul>
<li> <a href="#Method_1_40nesting_with_escapes_41"> Method 1 (nesting with escapes) </a>
</li> <li> <a href="#Method_2_40nesting_with_sectional_includes_41"> Method 2 (nesting with sectional includes) </a>
</li></ul> 
</li></ul> 
</li> <li> <a href="#Most_recently_changed_pages"> Most recently changed pages </a>
</li> <li> <a href="#Search_with_conditional_output"> Search with conditional output </a>
</li> <li> <a href="#Embedding_search_forms_to_return_a_formatted_result"> Embedding search forms to return a formatted result </a>
</li></ul> 
</li></ul> 
</div>
<p></p>
<h2 id="Syntax">  Syntax </h2>
<p></p>
Three parameters can be used to specify a customized search result:
<p></p>
<h3 id="A_1._61header_61_34..._34_61_parameter">  1. <code>header="..."</code> parameter </h3>
<p></p>
Use the header parameter to specify the header of a search result. It should correspond to the format of the format parameter. This parameter is optional.
<strong>Example:</strong> <pre class="tml">header&#61;&#34;&#124; &#42;Topic:&#42; &#124; &#42;Summary:&#42; &#124;&#34;</pre>
<p></p>
Format tokens that can be used in the header string:
<p></p>
<table class="foswikiTable" rules="none">
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a href="../PublishPlugin/publish.html" rel="nofollow" title="Sort by this column">Name:</a> </th>
			<th class="foswikiTableCol1 foswikiLastCol"> <a rel="nofollow" href="../PublishPlugin/publish.html" title="Sort by this column">Expands To:</a> </th>
		</tr>
	</thead>
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$web</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Name of the web </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$ntopics</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Number of topics found in current web. Will be 0 (zero). </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$nhits</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Number of hits if <code>multiple="on"</code>. Will be 0 (zero). </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$pager</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> pager control - can be optionally customised using the <code>pagerformat</code> below </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$n</code> or <code>$n()</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> New line. Use <code>$n()</code> if followed by alphanumeric character, e.g. write <code>Foo$n()Bar</code> instead of <code>Foo$nBar</code> <p class="foswikiHelp"><img width="16" title="TIP" height="16" alt="TIP" src="DocumentGraphics.attachments/tip.png"> Most macros accept parameter strings which are split over multiple lines. This is usually more readable than using <code>$n</code> tokens. If you are familiar with <a href="VarSTARTSECTION.html">sectional includes</a>, you might also consider <a href="#NestedSectionalInclude" class="foswikiCurrentTopicLink">nested sectional includes</a> to hold the newline content outside of the parameter string entirely.</p>  <p class="foswikiHelp"><img src="DocumentGraphics.attachments/tip.png" alt="TIP" height="16" title="TIP" width="16"> Note that newline is <em>not</em> a line break.  The browser will wrap the lines together. If you require a line break, displaying the results on two lines, use <code>%BR%</code>.  Or use two consecutive newlines to create a TML "Paragraph".</p> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$nop</code> or <code>$nop()</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Is a "no operation". This token gets removed; useful for nested search </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$quot</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Double quote (<code>"</code>) (\" also works) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$percent</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Percent sign (<code>%</code>) (<code>$percnt</code> also works) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$dollar</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Dollar sign (<code>$</code>) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$lt</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Less than sign (<code>&lt;</code>) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$gt</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Greater than sign (<code>&gt;</code>) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$amp</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Ampersand (<code>&amp;</code>) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> <code>$comma</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol foswikiLast"> Comma (<code>,</code>) </td>
		</tr>
	</tbody></table>
<p></p>
<p></p>
<div class="foswikiHelp"><img alt="ALERT!" height="16" src="DocumentGraphics.attachments/warning.png" width="16" title="ALERT!"> Note that if the separator parameter for SEARCH is not defined a newline is added after the header.</div>
<p></p>
<h3 id="A_2._61footer_61_34..._34_61_parameter">  2. <code>footer="..."</code> parameter </h3>
<p></p>
Use the footer parameter to specify the footer of a search result. It should correspond to the format of the format parameter. This parameter is optional.
<strong>Example:</strong> <pre class="tml">footer&#61;&#34;&#124; &#42;Total:&#42; &#124; &#42;&#36;nhits&#42; &#124;&#34;</pre>
<p></p>
Format tokens that can be used in the footer string:
<p></p>
<table class="foswikiTable" rules="none">
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a rel="nofollow" href="../PublishPlugin/publish.html" title="Sort by this column">Name:</a> </th>
			<th class="foswikiTableCol1 foswikiLastCol"> <a title="Sort by this column" href="../PublishPlugin/publish.html" rel="nofollow">Expands To:</a> </th>
		</tr>
	</thead>
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$web</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Name of the web </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$ntopics</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Number of topics found in current web </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$nhits</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Number of hits if <code>multiple="on"</code>. Cumulative across all topics in current web. Identical to <code>$ntopics</code> unless <code>multiple="on"</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$pager</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> pager control - can be optionally customised using the <code>pagerformat</code> below </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$n</code> or <code>$n()</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> New line. Use <code>$n()</code> if followed by alphanumeric character, e.g. write <code>Foo$n()Bar</code> instead of <code>Foo$nBar</code> <p class="foswikiHelp"><img width="16" title="TIP" height="16" alt="TIP" src="DocumentGraphics.attachments/tip.png"> Most macros accept parameter strings which are split over multiple lines. This is usually more readable than using <code>$n</code> tokens. If you are familiar with <a href="VarSTARTSECTION.html">sectional includes</a>, you might also consider <a class="foswikiCurrentTopicLink" href="#NestedSectionalInclude">nested sectional includes</a> to hold the newline content outside of the parameter string entirely.</p>  <p class="foswikiHelp"><img alt="TIP" height="16" src="DocumentGraphics.attachments/tip.png" width="16" title="TIP"> Note that newline is <em>not</em> a line break.  The browser will wrap the lines together. If you require a line break, displaying the results on two lines, use <code>%BR%</code>.  Or use two consecutive newlines to create a TML "Paragraph".</p> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$nop</code> or <code>$nop()</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Is a "no operation". This token gets removed; useful for nested search </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$quot</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Double quote (<code>"</code>) (\" also works) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$percent</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Percent sign (<code>%</code>) (<code>$percnt</code> also works) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$dollar</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Dollar sign (<code>$</code>) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$lt</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Less than sign (<code>&lt;</code>) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$gt</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Greater than sign (<code>&gt;</code>) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$amp</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Ampersand (<code>&amp;</code>) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> <code>$comma</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol foswikiLast"> Comma (<code>,</code>) </td>
		</tr>
	</tbody></table>
<p></p>
<p></p>
<div class="foswikiHelp"><img alt="ALERT!" height="16" src="DocumentGraphics.attachments/warning.png" width="16" title="ALERT!"> Note that if the separator parameter for SEARCH is not defined a newline is added after the last search result.</div>
<p></p>
<h3 id="A_3._61pagerformat_61_34..._34_61_parameter">  3. <code>pagerformat="..."</code> parameter </h3>
<p></p>
Use the pagerformat parameter to customise the appearance of the paging control. 
It should correspond to the format of the format parameter. 
This parameter is optional.
<strong>Example:</strong> <pre class="tml">pagerformat&#61;&#34;Page &#36;currentpage of &#36;numberofpages &#91;&#91;&#36;nexturl&#93;&#91;next page&#93;&#93;&#34;</pre>
<p></p>
Format tokens that can be used in the pagerformat string:
<p></p>
<table class="foswikiTable" rules="none">
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a title="Sort by this column" rel="nofollow" href="../PublishPlugin/publish.html">Name:</a> </th>
			<th class="foswikiTableCol1 foswikiLastCol"> <a href="../PublishPlugin/publish.html" rel="nofollow" title="Sort by this column">Expands To:</a> </th>
		</tr>
	</thead>
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$previouspage</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> The page number before the currently displayed one </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$currentpage</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> The currently displayed page number </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$nextpage</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> The page number after the currently displayed one </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$numberofpages</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Total number of pages there are results for </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$pagesize</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> The number of results per page </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$previousurl</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> full URL to the previous page - <em>IF</em> using the built in pager system </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$nexturl</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> full URL to the previous page - <em>IF</em> using the built in pager system </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$previousbutton</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> skin template (SEARCH:pager_previous) html for the full URL to the previous page - <em>IF</em> using the built in pager system </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$nextbutton</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> skin template (SEARCH:pager_next) html for the full URL to the previous page - <em>IF</em> using the built in pager system </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$n</code> or <code>$n()</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> New line. Use <code>$n()</code> if followed by alphanumeric character, e.g. write <code>Foo$n()Bar</code> instead of <code>Foo$nBar</code> <p class="foswikiHelp"><img alt="TIP" height="16" src="DocumentGraphics.attachments/tip.png" width="16" title="TIP"> Most macros accept parameter strings which are split over multiple lines. This is usually more readable than using <code>$n</code> tokens. If you are familiar with <a href="VarSTARTSECTION.html">sectional includes</a>, you might also consider <a href="#NestedSectionalInclude" class="foswikiCurrentTopicLink">nested sectional includes</a> to hold the newline content outside of the parameter string entirely.</p>  <p class="foswikiHelp"><img src="DocumentGraphics.attachments/tip.png" alt="TIP" height="16" title="TIP" width="16"> Note that newline is <em>not</em> a line break.  The browser will wrap the lines together. If you require a line break, displaying the results on two lines, use <code>%BR%</code>.  Or use two consecutive newlines to create a TML "Paragraph".</p> </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$nop</code> or <code>$nop()</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Is a "no operation". This token gets removed; useful for nested search </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$quot</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Double quote (<code>"</code>) (\" also works) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$percent</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Percent sign (<code>%</code>) (<code>$percnt</code> also works) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$dollar</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Dollar sign (<code>$</code>) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$lt</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Less than sign (<code>&lt;</code>) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$gt</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Greater than sign (<code>&gt;</code>) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$amp</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Ampersand (<code>&amp;</code>) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> <code>$comma</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol foswikiLast"> Comma (<code>,</code>) </td>
		</tr>
	</tbody></table>
<p></p>
<p></p>
<h3 id="A_4._61format_61_34..._34_61_parameter">  4. <code>format="..."</code> parameter </h3>
<p></p>
Use the format parameter to specify the format of one search hit.
<strong>Example:</strong> <pre class="tml">format&#61;&#34;&#124; &#36;topic &#124; &#36;summary &#124;&#34;</pre>
<p></p>
Format tokens that can be used in the format string:
<p></p>
<table class="foswikiTable" rules="none">
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a href="../PublishPlugin/publish.html" rel="nofollow" title="Sort by this column">Name:</a> </th>
			<th class="foswikiTableCol1 foswikiLastCol"> <a title="Sort by this column" href="../PublishPlugin/publish.html" rel="nofollow">Expands To:</a> </th>
		</tr>
	</thead>
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$web</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Name of the web </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$topic</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Topic name </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$topic(20)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Topic name, "<tt>- </tt>" hyphenated every 20 characters </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$topic(30, -&lt;br /&gt;)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Topic name, hyphenated every 30 characters with separator "<tt>-&lt;br /&gt;</tt>" </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$topic(40, ...)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Topic name, shortened to 40 characters with trailing ellipsis. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$parent</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Name of parent topic; empty if not set </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$parent(20)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Name of parent topic, same hyphenation/shortening as <code>$topic()</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$text</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Formatted topic text. In case of a <code>multiple="on"</code> search, it is the line found for each search hit. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$locked</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> LOCKED flag (if any) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$date</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Time stamp of last topic update, e.g. <code>08 Feb 2023 - 21:51</code> </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$isodate</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Time stamp of last topic update, e.g. <code>2023-02-08T21:51Z</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$index</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> number of total results - can be used as a running counter in the <code>format</code>, or in the <code>footer</code>. This $index is not affected by web based partitioning of results. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$item</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> the full name of a result item - in a SEARCH context, equivalent to <code>$web.$topic</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$rev</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Number of last topic revision, e.g. <code>4</code> </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$username</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Login username of last user to update the topic, e.g. <code>jsmith</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$wikiname</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a href="WikiName.html">WikiName</a> of last user to update the topic, e.g. <code>JohnSmith</code> </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$wikiusername</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a href="WikiName.html">WikiName</a> of last usr to update the topic, like <code>Main.JohnSmith</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$createdate</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Time stamp of topic revision 1 </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$createusername</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Login username of topic revision 1, e.g. <code>jsmith</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$createwikiname</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a href="WikiName.html">WikiName</a> of topic revision 1, e.g. <code>JohnSmith</code> </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$createwikiusername</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a href="WikiName.html">WikiName</a> topic link of topic revision 1, e.g. <code>Main.JohnSmith</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$summary</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Topic summary, just the plain text, all formatting and line breaks removed; up to 162 characters </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$summary(50)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Topic summary, up to 50 characters shown </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$summary(showvarnames)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Topic summary, with <code>%SOMEMACRO{...}%</code> macros shown as <code>SOMEMACRO{...}</code> </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$summary(noheader)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Topic summary, with leading <code>---+ headers</code> removed<br /> <strong>Note:</strong> The tokens can be combined, for example <code>$summary(100, showvarnames, noheader)</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$summary(searchcontext)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Creates a topic summary with the search terms highlighted </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$summary(searchcontext, 50)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Creates a topic summary with the search terms highlighted, up to 50 characters </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$changes</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Summary of changes between latest rev and previous rev </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$changes(n)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Summary of changes between latest rev and rev n </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$formname</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> The name of the form attached to the topic; empty if none </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$formfield(name)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> The field value of a form field; for example, if <a href="FAQWhatIsWikiWiki.html">FAQWhatIsWikiWiki</a> was a search hit, <code>$formfield(TopicClassification)</code> would get expanded to <code>=. This applies only to topics that have a <a href="DataForms.html">DataForm</a>. For multi-line textfields new lines are replaced by the value of the =newline</code> parameter if it is defined, otherwise by an HTML &lt;br /&gt; </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$formfield(name, 10)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Form field value, "<tt>- </tt>" hyphenated every 10 characters </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$formfield(name, 20, -&lt;br /&gt;)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Form field value, hyphenated every 20 characters with separator "<tt>-&lt;br /&gt;</tt>" </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$formfield(name,30,...)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Form field value, shortened to 30 characters with trailing ellipsis. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$formfield(name, display)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Form field value <em>after</em> mapping the stored value to the display value (use with <code>+values</code> form fields). You can still use the hyphenation controls described above by placing them <strong>after</strong> <code>display</code> e.g. <code>$formfield(name, display, 10)</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$extract(reg-exp)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> A regular expression pattern to extract some text from a topic (does not search meta data; use <code>$formfield</code> instead). Escapes some characters to their standard <a href="FormatTokens.html">FormatTokens</a> in the discovered text to make embedding in other macros easier. See <a class="foswikiCurrentTopicLink" href="#Using_36extract_and_36pattern">Using $extract and $pattern</a> below for more information. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$pattern(reg-exp)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> As <code>$extract</code>, with the difference that <code>$pattern</code> does <strong>not</strong> escape quotes or precent signs in the result. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$count(reg-exp)</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Count of number of times a regular expression pattern appears in the text of a topic (does not search meta data). Follows guidelines for use and limitations outlined above under <code>$pattern(reg-exp)</code>. Example: <code>$count(.*?(---[+][+][+][+]) .*)</code> counts the number of &lt;H4&gt; headers in a page. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$ntopics</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Number of topics found in current web. This is the current topic count, not the total number of topics </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$nhits</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Number of hits if <code>multiple="on"</code>. Cumulative across all topics in current web. Identical to <code>$ntopics</code> unless <code>multiple="on"</code> </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$pager</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> pager control - can be optionally customised using the <code>pagerformat</code> below </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$n</code> or <code>$n()</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> New line. Use <code>$n()</code> if followed by alphanumeric character, e.g. write <code>Foo$n()Bar</code> instead of <code>Foo$nBar</code> <p class="foswikiHelp"><img title="TIP" width="16" src="DocumentGraphics.attachments/tip.png" height="16" alt="TIP"> Most macros accept parameter strings which are split over multiple lines. This is usually more readable than using <code>$n</code> tokens. If you are familiar with <a href="VarSTARTSECTION.html">sectional includes</a>, you might also consider <a class="foswikiCurrentTopicLink" href="#NestedSectionalInclude">nested sectional includes</a> to hold the newline content outside of the parameter string entirely.</p>  <p class="foswikiHelp"><img title="TIP" width="16" src="DocumentGraphics.attachments/tip.png" alt="TIP" height="16"> Note that newline is <em>not</em> a line break.  The browser will wrap the lines together. If you require a line break, displaying the results on two lines, use <code>%BR%</code>.  Or use two consecutive newlines to create a TML "Paragraph".</p> </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$nop</code> or <code>$nop()</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Is a "no operation". This token gets removed; useful for nested search </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$quot</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Double quote (<code>"</code>) (\" also works) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$percent</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Percent sign (<code>%</code>) (<code>$percnt</code> also works) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$dollar</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Dollar sign (<code>$</code>) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$lt</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Less than sign (<code>&lt;</code>) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$gt</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Greater than sign (<code>&gt;</code>) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>$amp</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Ampersand (<code>&amp;</code>) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> <code>$comma</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol foswikiLast"> Comma (<code>,</code>) </td>
		</tr>
	</tbody></table>
<p></p>
<p></p>
<h2 id="Using_36extract_and_36pattern">  Using $extract and $pattern </h2>
<p></p>
<code>$extract</code> and <code>$pattern</code> are subtle. These tokens specify a <a href="RegularExpression.html">RegularExpression</a> that covers the whole text (of each line found by the search if <code>multiple="on"</code>, of the entire topic text otherwise). The regular expression typically starts with <code>.*</code>, and must end in <code>.*</code>
<p></p>
The leading <code>.*</code> matches all the content up to the start of the string you want to find. It will try to match the longest string of characters it can, so if your pattern occurs several times in the content it will always match the <em>last</em> occurence. If you always want to match the first occurrence, use <code>.*?</code> instead.
<p></p>
You _must* end the pattern with <code>.*</code>
<p></p>
Put the section of the pattern that matches the text you want to keep in parenthesis, like this <code>$extract(.*?(from here.*?to here).*)</code> <ul>
<li> Example: =$extract(.*?\*.*?Email\:\s*([^
</li></ul> 
\r]+).*)= extracts the e-mail address from <code>* Email: ...</code>
<p></p>
Do not use <code>.*</code> <em>inside</em> the parentheses, e.g. <code>$extract(.*foo(.*)bar.*)</code> does not work. You can however use <code>.*?</code> thus <code>$extract(.*foo(.*?)bar.*)</code>
<p></p>
Make sure that the integrity of a web page is not compromised; for example, if you include an HTML table make sure to include everything including the table end tag. <code>$extract</code> will automatically escape <code>"&lt;&gt;&amp;%$</code> characters so that the string matched by the pattern doesn't break any macros that are wrapped around it. <code>$pattern</code> does not do this, and should be used with care. <code>$extract</code> is only available in Foswiki 2.0 and later.
<p></p>
<h2 id="Examples">  Examples </h2>
<p></p>
Here are some samples of formatted searches. The <a href="SearchPatternCookbook.html">SearchPatternCookbook</a> has other examples, such as <a href="SearchPatternCookbook.html">creating a picklist of usernames</a>, <a href="SearchPatternCookbook.html">searching for topic children</a> and more.
<p></p>
<span id="SearchTable"></span>
<h3 id="Search_showing_topic_name_and_summary">  Search showing topic name and summary </h3>
<p></p>
<pre class="tml">
&#37;STARTSECTION{&#34;example1&#34;}&#37;
&#37;SEARCH{
   &#34;VarREMOTE&#34;
   scope&#61;&#34;topic&#34;
   nonoise&#61;&#34;on&#34;
   header&#61;&#34;&#124; &#42;Topic&#42;        &#124; &#42;Summary&#42;  &#124;&#34;
   format&#61;&#34;&#124; &#91;&#91;&#36;topic&#93;&#93;     &#124; &#36;summary   &#124;&#34;
   footer&#61;&#34;&#124; &#42;Topics found&#42; &#124; &#42;&#36;ntopics&#42; &#124;&#34;
}&#37;
&#37;ENDSECTION{&#34;example1&#34;}&#37;
</pre>
<p></p>
<p></p>
<a class="jqButton " href=".." onclick="jQuery('#example1').trigger('refresh');return false;"><span class='jqButtonText'>Click to execute</span></a>
<p></p>
<div class="jqLoader {mode:'manual', web:'System', topic:'FormattedSearch', section:'example1'}" id="example1"></div>
<p></p>
<p></p>
<p></p>
<h3 id="Table_showing_form_field_values_of_topics_with_a_form">  Table showing form field values of topics with a form </h3>
<p></p>
In a web where there is a form that contains a <code>TopicClassification</code> field, an <code>OperatingSystem</code> field and an <code>OsVersion</code> field we could write:
<p></p>
<pre class="tml">
&#37;STARTSECTION{&#34;example2&#34;}&#37;
&#37;SEARCH{
   &#34;TopicClassification~&#39;FrequentlyAskedQuestion&#39;&#34;
   type&#61;&#34;query&#34;
   nonoise&#61;&#34;on&#34;
   header&#61;&#34;&#124; &#42;Topic:&#42; &#124; &#42;Summary:&#42; &#124; &#42;Related Topics:&#42; &#124;&#34;
   format&#61;&#34;&#124; &#91;&#91;&#36;topic&#93;&#93; &#124; &#36;formfield(TopicSummary) &#124; &#36;formfield(RelatedTopics) &#124;&#34;
}&#37;
&#37;ENDSECTION{&#34;example2&#34;}&#37;
</pre>
<p></p>
<p></p>
<a onclick="jQuery('#example2').trigger('refresh');return false;" href=".." class="jqButton "><span class='jqButtonText'>Click to execute</span></a>
<p></p>
<div class="jqLoader {mode:'manual', web:'System', topic:'FormattedSearch', section:'example2'}" id="example2"></div>
<p></p>
<p></p>
<p></p>
<h3 id="Extract_some_text_from_a_topic_using_regular_expression">  Extract some text from a topic using regular expression </h3>
The following example makes use of the <code>$pattern()</code> token to extract the first level-1 heading for each topic:
<p></p>
<p></p>
<pre class="tml">

&#37;SEARCH{
    &#34;^---&#91;+&#93;&#91;^+&#93;&#91;^\r\n&#93;+&#91;\r\n&#93;&#34;
    type&#61;&#34;regex&#34;
    nonoise&#61;&#34;on&#34;
    header&#61;&#34;Headings:&#34;
    limit&#61;&#34;5&#34;
    format&#61;&#34;   &#42; &#91;&#91;&#36;topic&#93;&#91;&#36;pattern(&#91;\r\n\-+!&#93;+(&#91;^\r\n&#93;&#42;?)&#91;\r\n&#93;.&#42;)&#93;&#93;&#34;
    footer&#61;&#34;Found &#36;ntopics topics with level-1 headings&#34;
}&#37;

</pre>
<p></p>
<p></p>
<a class="jqButton " href=".." onclick="jQuery('#solution12').trigger('refresh');return false;"><span class='jqButtonText'>Click to execute</span></a>
<p></p>
<div class="jqLoader {mode:'manual', web:'System', topic:'SearchPatternCookbook', section:'solution12'}" id="solution12"></div>
<p></p>
<p></p>
<p></p>
<p></p>
<span id="NestedSearch"></span>
<h3 id="Nested_Search">  Nested Search </h3>
<a href="VarSEARCH.html">SEARCH</a> is one of many <a href="Macros.html">macros</a> that produce output which may be controlled with <code>format</code>, <code>header</code> and <code>footer</code> parameters, among others. To make use of <em>additional</em> macros in the output, familiarity with <a class="foswikiCurrentTopicLink" href="#InsideOutLeftToRight">inside-out, left-to-right</a> order of expansion rules is required. There are two forms: <ol>
<li> Standard: Use <code>%INNERMACRO%</code> to build the parameter string <strong>before</strong> <code>%OUTERMACRO%</code> is expanded   <pre class="tml"> &#37;OUTERMACRO{
   format&#61;&#34;&#37;INNERMACRO&#37;&#34;
 }&#37;</pre>
</li> <li> Delayed: Use the parameter string to incorporate <code>%INNERMACRO%</code> into the output of <code>%OUTERMACRO%</code>   <pre class="tml"> &#37;OUTERMACRO{
   format&#61;&#34;&#36;percentINNERMACRO&#36;percent&#34;
 }&#37;</pre>
</li></ol> 
<div class="foswikiHelp">
  <img alt="TIP" height="16" src="DocumentGraphics.attachments/tip.png" width="16" title="TIP"> When working with a given <a href="Macros.html">macro</a>, consult its documentation to determine which parameters support the <code>$percent/$percnt</code> <a href="FormatTokens.html">format tokens</a>. Generally only <em>output parameters</em> like <code>header</code>, <code>format</code> and <code>footer</code> support <a href="FormatTokens.html">format tokens</a>.
  </div>
<p></p>
<p></p>
<span id="StandardForm"></span>
<h4 id="Standard_form">  Standard form </h4>
<span id="InsideOutLeftToRight"></span>
The key to understanding nested expressions in Foswiki is to understand that macros are expanded "inside-out, left-to-right". <strong>Example:</strong>
<p></p>
<pre class="tml">
&#37;MACRO1{
   something&#61;&#34;&#37;MACRO2{
      somethingelse&#61;&#34;&#37;MACRO3&#37;, &#37;MACRO4&#37;&#34;
   }&#37;&#34;
}&#37;
</pre>
The macros are expanded in this order: MACRO3, MACRO4, MACRO2, MACRO1.
<p></p>
<h5 id="Step_45by_45Step_Example">  Step-by-Step Example </h5>
<p></p>
<div class='jqTabPane jqTabPanePlain'  data-select='1' data-auto-max-expand='false' data-animate='true' data-remember='false' data-min-height='0'>
<div id='tab7356' class='jqTab ' style='display:none'>
<h2 class='jqTabLabel'>Step 1</h2>
<div class='jqTabContents' >
<pre class="tml">
%INCLUDE{
    "%QUERY{
        "'%THETOPIC%'/%THEFIELD%"
    }%"
    section="Summary"
}%
   * Set THETOPIC = %SYSTEMWEB%.FAQWhatIsWikiWiki
   * Set THEFIELD = TopicClassification
</pre>
</div></div>
<div id='tab6866' class='jqTab ' style='display:none'>
<h2 class='jqTabLabel'>Step 2</h2>
<div class='jqTabContents' >
<pre class="tml">
%INCLUDE{
    "%QUERY{
        "'%SYSTEMWEB%.FAQWhatIsWikiWiki'/%THEFIELD%"
    }%"
    section="Summary"
}%
   * Set THETOPIC = %SYSTEMWEB%.FAQWhatIsWikiWiki
   * Set THEFIELD = TopicClassification
</pre>
</div></div>
<div id='tab1330' class='jqTab ' style='display:none'>
<h2 class='jqTabLabel'>Step 3</h2>
<div class='jqTabContents' >
<pre class="tml">
%INCLUDE{
    "%QUERY{
        "'%SYSTEMWEB%.FAQWhatIsWikiWiki'/TopicClassification"
    }%"
    section="Summary"
}%
   * Set THETOPIC = %SYSTEMWEB%.FAQWhatIsWikiWiki
   * Set THEFIELD = TopicClassification
</pre>
</div></div>
<div id='tab1184' class='jqTab ' style='display:none'>
<h2 class='jqTabLabel'>Step 4</h2>
<div class='jqTabContents' >
<pre class="tml">
%INCLUDE{
    "%QUERY{
        "'System.FAQWhatIsWikiWiki'/TopicClassification"
    }%"
    section="Summary"
}%
   * Set THETOPIC = %SYSTEMWEB%.FAQWhatIsWikiWiki
   * Set THEFIELD = TopicClassification
</pre>
</div></div>
<div id='tab506' class='jqTab ' style='display:none'>
<h2 class='jqTabLabel'>Step 5</h2>
<div class='jqTabContents' >
<pre class="tml">
%INCLUDE{
    "FrequentlyAskedQuestion"
    section="Summary"
}%
   * Set THETOPIC = %SYSTEMWEB%.FAQWhatIsWikiWiki
   * Set THEFIELD = TopicClassification
</pre>
</div></div>
<div id='tab625' class='jqTab ' style='display:none'>
<h2 class='jqTabLabel'>Step 6</h2>
<div class='jqTabContents' >
<pre class="tml">

These topics are for frequently
asked questions including answers.

   * Set THETOPIC = %SYSTEMWEB%.FAQWhatIsWikiWiki
   * Set THEFIELD = TopicClassification
</pre>
</div></div>
<div id='tab9720' class='jqTab ' style='display:none'>
<h2 class='jqTabLabel'>Step 7</h2>
<div class='jqTabContents' >
<pre class="tml">

These topics are for frequently
asked questions including answers.

   * Set THETOPIC = System.FAQWhatIsWikiWiki
   * Set THEFIELD = TopicClassification
</pre>
</div></div>
</div>
<p></p>
<span id="DelayedForm"></span>
<h4 id="Delayed_form">  Delayed form </h4>
<a href="#StandardForm" class="foswikiCurrentTopicLink">Standard form</a> macros can nearly always be used to build the parameter string of another macro; however, sometimes it is desirable to bypass the <a href="#InsideOutLeftToRight" class="foswikiCurrentTopicLink">inside-out</a> expansion order and delay the inner macro until after the outer macro has finished expansion. This is accomplished by using the <a href="FormatTokens.html">$percent</a> format token instead of <code>%</code>, and escaping any <code>"</code> character it uses (becomes <code>\"</code>)
<p></p>
<div class="foswikiHelp">
  <img alt="TIP" height="16" src="DocumentGraphics.attachments/tip.png" width="16" title="TIP"> When working with a given <a href="Macros.html">macro</a>, consult its documentation to determine which parameters support the <code>$percent/$percnt</code> <a href="FormatTokens.html">format tokens</a>. Generally only <em>output parameters</em> like <code>header</code>, <code>format</code> and <code>footer</code> support <a href="FormatTokens.html">format tokens</a>.
  </div>
<strong>Example:</strong>
<pre class="tml">
&#37;MACRO1{
   format&#61;&#34;&#36;percentMACRO2{
      format&#61;\&#34;&#37;MACRO3&#37;, &#37;MACRO4&#37;\&#34;
   }&#36;percent&#34;
}&#37;
</pre>
The macros are expanded in this order: MACRO3, MACRO4, MACRO1, <strong>MACRO2</strong>.
<p></p>
<h5 id="Step_45by_45Step_Example_AN1">  Step-by-Step Example </h5>
<p></p>
From the <a href="#ConditionalOutputExample" class="foswikiCurrentTopicLink">conditional output example</a>:
<p></p>
<div class='jqTabPane jqTabPanePlain'  data-select='1' data-auto-max-expand='false' data-animate='true' data-remember='false' data-min-height='0'>
<div id='tab7372' class='jqTab ' style='display:none'>
<h2 class='jqTabLabel'>Step 1</h2>
<div class='jqTabContents' >
<pre class="tml">
&#37;SEARCH{
  &#34;info.date &#62;&#61; d2n(&#39;2009-01-01&#39;) AND info.date &#60;&#61; d2n(&#39;2009-12-31&#39;)&#34;
  type&#61;&#34;query&#34;
  limit&#61;&#34;2&#34;
  nonoise&#61;&#34;on&#34;
  format&#61;&#34;   &#42; &#36;percentICON{
    \&#34;&#36;percentIF{
      \&#34;&#39;&#36;topic&#39;/parent.name&#61;&#39;&#37;PARENT&#37;&#39;\&#34;
      then&#61;\&#34;info\&#34; else&#61;\&#34;gear\&#34;
    }&#36;percent\&#34;
  }&#36;percent &#91;&#91;&#36;topic&#93;&#93;&#34;
}&#37;
----
   &#42; Set PARENT &#61; UserDocumentationCategory
</pre>
</div></div>
<div id='tab5590' class='jqTab ' style='display:none'>
<h2 class='jqTabLabel'>Step 2</h2>
<div class='jqTabContents' >
<pre class="tml">
%SEARCH{
  "info.date >= d2n('2009-01-01') AND info.date <= d2n('2009-12-31')"
  type="query"
  limit="2"
  nonoise="on"
  format="   * $percentICON{
    \"$percentIF{
      \"'$topic'/parent.name='UserDocumentationCategory'\"
      then=\"info\" else=\"gear\"
    }$percent\"
  }$percent [[$topic]]"
}%
----
   * Set PARENT = UserDocumentationCategory
</pre>
</div></div>
<div id='tab2225' class='jqTab  jqAjaxTab' data-url="/foswiki/bin/view/System/Macros?skin=text&amp;section=step3" style='display:none'>
<h2 class='jqTabLabel'>Step 3</h2>
<div class='jqTabContents' >
<span class='foswikiIcon'><img src="DocumentGraphics.attachments/processing.gif" height="16" alt="processing" width="16"></span>
<pre class="foswikiHidden">

&#60;pre class&#61;&#34;tml&#34;&#62;
&#37;SEARCH{
  &#34;info.date &#62;&#61; d2n(&#39;2009-01-01&#39;) AND info.date &#60;&#61; d2n(&#39;2009-12-31&#39;)&#34;
  type&#61;&#34;query&#34;
  limit&#61;&#34;2&#34;
  nonoise&#61;&#34;on&#34;
  format&#61;&#34;   &#42; &#36;percent&#60;nop&#62;ICON{
    \&#34;&#36;percent&#60;nop&#62;IF{
      \&#34;&#39;&#36;topic&#39;/parent.name&#61;&#39;UserDocumentationCategory&#39;\&#34;
      then&#61;\&#34;info\&#34; else&#61;\&#34;gear\&#34;
    }&#36;percent\&#34;
  }&#36;percent &#91;&#91;&#36;topic&#93;&#93;&#34;
}&#37;
----
   &#42; Set PARENT &#61; UserDocumentationCategory
&#60;/pre&#62;

</pre>
</div></div>
<div id='tab7634' class='jqTab  jqAjaxTab' data-url="/foswiki/bin/view/System/Macros?skin=text&amp;section=step4" style='display:none'>
<h2 class='jqTabLabel'>Step 4</h2>
<div class='jqTabContents' >
<span class='foswikiIcon'><img width="16" src="DocumentGraphics.attachments/processing.gif" alt="processing" height="16"></span>
<pre class="foswikiHidden">

&#60;pre class&#61;&#34;tml&#34;&#62;
&#37;SEARCH{
  &#34;info.date &#62;&#61; d2n(&#39;2009-01-01&#39;) AND info.date &#60;&#61; d2n(&#39;2009-12-31&#39;)&#34;
  type&#61;&#34;query&#34;
  limit&#61;&#34;2&#34;
  nonoise&#61;&#34;on&#34;
  format&#61;&#34;   &#42; &#36;percent&#60;nop&#62;ICON{
    \&#34;&#36;percentIF{
      \&#34;&#39;&#36;topic&#39;/parent.name&#61;&#39;UserDocumentationCategory&#39;\&#34;
      then&#61;\&#34;info\&#34; else&#61;\&#34;gear\&#34;
    }&#36;percent\&#34;
  }&#36;percent &#91;&#91;&#36;topic&#93;&#93;&#34;
}&#37;
----
   &#42; Set PARENT &#61; UserDocumentationCategory
&#60;/pre&#62;

</pre>
</div></div>
<div id='tab846' class='jqTab  jqAjaxTab' data-url="/foswiki/bin/view/System/Macros?skin=text&amp;section=step5" style='display:none'>
<h2 class='jqTabLabel'>Step 5</h2>
<div class='jqTabContents' >
<span class='foswikiIcon'><img width="16" height="16" alt="processing" src="DocumentGraphics.attachments/processing.gif"></span>
<pre class="foswikiHidden">

&#60;pre class&#61;&#34;tml&#34;&#62;
&#37;SEARCH{
  &#34;info.date &#62;&#61; d2n(&#39;2009-01-01&#39;) AND info.date &#60;&#61; d2n(&#39;2009-12-31&#39;)&#34;
  type&#61;&#34;query&#34;
  limit&#61;&#34;2&#34;
  nonoise&#61;&#34;on&#34;
  format&#61;&#34;   &#42; &#38;lt;img src&#61;\&#34;&#36;percentICONURL{
    \&#34;&#36;percentIF{
      \&#34;&#39;&#36;topic&#39;/parent.name&#61;&#39;UserDocumentationCategory&#39;\&#34;
      then&#61;\&#34;info\&#34; else&#61;\&#34;gear\&#34;
    }&#36;percent\&#34;
  }&#36;percent\&#34;/&#38;gt; &#91;&#91;&#36;topic&#93;&#93;&#34;
}&#37;
----
   &#42; Set PARENT &#61; UserDocumentationCategory
&#60;/pre&#62;

</pre>
</div></div>
</div>
<p></p>
<p></p>
<h4 id="Worked_example">  Worked example </h4>
<strong>Problem:</strong> search for some topics in an initial (outer) search, and for each of them apply a second (inner) search. The idea is to use the outer search to build a series of inner seraches.
<p></p>
<span id="NestedSearchExample"></span>
Consider the following example. Let's search for all topics that contain the word "culture" (outer search), and find out where each topic found is linked from (inner search).
<p></p>
<strong>Initial (outer) search:</strong>
<pre class="tml">
&#37;SEARCH{
   &#34;culture&#34;
   nonoise&#61;&#34;on&#34;
   format&#61;&#34;   &#42; &#36;topic is referenced by: (list all references)&#34;
}&#37;</pre>
<p></p>
<strong>Second (inner) search:</strong>
<p></p>
For each hit, we want this search:
<pre class="tml">
&#37;SEARCH{
   &#34;(topic found in outer search)&#34;
   nonoise&#61;&#34;on&#34;
   format&#61;&#34;&#36;topic&#34;
   separator&#61;&#34;, &#34;
}&#37;</pre>
<p></p>
Now let's nest the two.
<span id="NestingWithEscapes"></span>
<h5 id="Method_1_40nesting_with_escapes_41">  Method 1 (nesting with escapes) </h5>
The inner search cannot be placed directly into the format string of the outer, because of the "inside-out, left-to-right" macro expansion behaviour <a href="#InsideOutLeftToRight" class="foswikiCurrentTopicLink">discussed earlier</a>. It must be delayed so that the outer search is evaluated first. To do this, we need to escape the inner search, i.e. let the outer search build a series of inner searches, which are executed only when the outer list is complete.. <ul>
<li> Use <code>$percent</code> to escape (delay) the inner search's <a href="VarSEARCH.html">SEARCH</a> macro
</li> <li> Use <code>\"</code> to escape the double quotes
</li> <li> Use <code>$dollar</code> to escape the <code>$</code> of <code>$topic</code>
</li></ul> 
<p></p>
<pre class="tml">
&#37;STARTSECTION{&#34;example3&#34;}&#37;
&#37;SEARCH{
   &#34;culture&#34;
   nonoise&#61;&#34;on&#34;
   limit&#61;&#34;5&#34;
   format&#61;&#34;\
   &#42; &#91;&#91;&#36;topic&#93;&#93; is referenced by:
      &#42; &#36;percentSEARCH{
         \&#34;&#36;topic\&#34;
         nonoise&#61;\&#34;on\&#34;
         format&#61;\&#34;&#91;&#91;&#36;dollartopic&#93;&#93;\&#34;
         separator&#61;\&#34;, \&#34;
      }&#36;percent&#34;
}&#37;
&#37;ENDSECTION{&#34;example3&#34;}&#37;
</pre>
<p></p>
<p></p>
<a onclick="jQuery('#example3').trigger('refresh');return false;" class="jqButton " href=".."><span class='jqButtonText'>Click to execute</span></a>
<p></p>
<div class="jqLoader {mode:'manual', web:'System', topic:'FormattedSearch', section:'example3'}" id="example3"></div>
<p></p>
<p></p>
<p></p>
<div class="foswikiHelp">
<img src="DocumentGraphics.attachments/warning.png" height="16" alt="ALERT!" title="ALERT!" width="16"> When nesting with escapes, each new nesting level must "escape the escapes", e.g. write <code>$dollarpercentSEARCH{</code> for level three, <code>$dollardollarpercentSEARCH{</code> for level four, etc.
</div>
<p></p>
<span id="NestedSectionalInclude"></span>
<h5 id="Method_2_40nesting_with_sectional_includes_41">  Method 2 (nesting with sectional includes) </h5>
Nested expressions with delayed macros can be difficult to write: care must be taken to escape all the quotes of the inner delayed macro, and it may become confusing whether to use <code>$topic</code>, <code>$dollartopic</code> or <code>$dollardollartopic</code>.
<p></p>
If you find yourself using escaped tokens like <code>$dollartopic</code>, another approach is to use the <a href="VarSTARTSECTION.html">STARTSECTION</a>/<a href="VarENDSECTION.html">ENDSECTION</a> feature of <a href="VarINCLUDE.html">INCLUDE</a>. Instead of nesting the inner search expression directly inside the format string of the outer, the inner search is written as a separate stand-alone section of a topic which is INCLUDEd into the format string of the outer.
<p></p>
<pre class="tml">
&#37;STARTSECTION{&#34;example4&#34;}&#37;
&#37;SEARCH{
   &#34;culture&#34;
   nonoise&#61;&#34;on&#34;
   limit&#61;&#34;5&#34;
   format&#61;&#34;\
   &#42; &#36;topic is referenced by:
      &#42; &#36;percentINCLUDE{\&#34;&#37;TOPIC&#37;\&#34; section&#61;\&#34;mysearch\&#34; thetopic&#61;\&#34;&#36;topic\&#34;}&#36;percent&#34;
}&#37;

&#60;verbatim class&#61;&#34;foswikiHidden&#34;&#62;
&#37;STARTSECTION{&#34;mysearch&#34;}&#37;&#37;SEARCH{
   &#34;&#37;thetopic&#37;&#34;
   nonoise&#61;&#34;on&#34;
   format&#61;&#34;&#36;topic&#34;
   separator&#61;&#34;, &#34;
}&#37;&#37;ENDSECTION{&#34;mysearch&#34;}&#37;
&#60;/verbatim&#62;
&#37;ENDSECTION{&#34;example4&#34;}&#37;
</pre>
<p></p>
<p></p>
<a onclick="jQuery('#example4').trigger('refresh');return false;" href=".." class="jqButton "><span class='jqButtonText'>Click to execute</span></a>
<p></p>
<div class="jqLoader {mode:'manual', web:'System', topic:'FormattedSearch', section:'example4'}" id="example4"></div>
<p></p>
<p></p>
<p></p>
<h3 id="Most_recently_changed_pages">  Most recently changed pages </h3>
<p></p>
<pre class="tml">
&#37;STARTSECTION{&#34;example5&#34;}&#37;
&#37;SEARCH{
   &#34;1&#34;
   type&#61;&#34;query&#34;
   nonoise&#61;&#34;on&#34;
   order&#61;&#34;modified&#34;
   reverse&#61;&#34;on&#34;
   limit&#61;&#34;7&#34;
   header&#61;&#34;&#124; &#42;Topic&#42; &#124; &#42;Changed&#42; &#124; &#42;By&#42; &#124;&#34;
   format&#61;&#34;&#124; &#91;&#91;&#36;topic&#93;&#93; &#124; &#36;date  &#124; &#36;wikiusername &#124;&#34;
}&#37;
&#37;ENDSECTION{&#34;example5&#34;}&#37;
</pre>
<p></p>
<p></p>
<a href=".." class="jqButton " onclick="jQuery('#example5').trigger('refresh');return false;"><span class='jqButtonText'>Click to execute</span></a>
<p></p>
<div class="jqLoader {mode:'manual', web:'System', topic:'FormattedSearch', section:'example5'}" id="example5"></div>
<p></p>
<p></p>
<p></p>
<span id="ConditionalOutputExample"></span>
<h3 id="Search_with_conditional_output">  Search with conditional output </h3>
<p></p>
Sometimes it may be desirable for each hit to be displayed differently depending on some criteria. For example, maybe you want to list 20 topics modified in 2009, but decorate the hits which are children of <a href="UserDocumentationCategory.html">UserDocumentationCategory</a> with an <span class='foswikiIcon'><img alt="info" height="16" src="DocumentGraphics.attachments/info.png" width="16"></span> icon. <ol>
<li> Specify a search which returns the hits you need
</li> <li> For each search hit, test the condition that will influence the output using a nested <a href="VarIF.html">IF</a> <a href="IfStatements.html">statement</a>
</li></ol> 
<p></p>
<pre class="tml">
&#37;STARTSECTION{&#34;example6&#34;}&#37;
&#37;SEARCH{
   &#34;info.date &#62;&#61; d2n(&#39;2009-01-01&#39;) AND info.date &#60;&#61; d2n(&#39;2009-12-31&#39;)&#34;
   type&#61;&#34;query&#34;
   limit&#61;&#34;20&#34;
   format&#61;&#34;   &#42; &#36;percentICON{
      \&#34;&#36;percentIF{
         \&#34;&#39;&#36;topic&#39;/parent.name&#61;&#39;UserDocumentationCategory&#39;\&#34;
         then&#61;\&#34;info\&#34;
         else&#61;\&#34;gear\&#34;
      }&#36;percent\&#34;
   }&#36;percent &#91;&#91;&#36;topic&#93;&#93;&#34;
}&#37;
&#37;ENDSECTION{&#34;example6&#34;}&#37;
</pre>
<p></p>
<p></p>
<a onclick="jQuery('#example6').trigger('refresh');return false;" class="jqButton " href=".."><span class='jqButtonText'>Click to execute</span></a>
<p></p>
<div class="jqLoader {mode:'manual', web:'System', topic:'FormattedSearch', section:'example6'}" id="example6"></div>
<p></p>
<p></p>
<p></p>
<div class="foswikiHelp">
<span class='foswikiIcon'><img width="16" src="DocumentGraphics.attachments/info.png" height="16" alt="info"></span> <strong>Details:</strong> <ul>
<li> The SEARCH has a delayed <a href="VarICON.html">ICON</a>. The <code>$percent</code> ensures that ICON is evaluated once for each search hit
</li> <li> The <a href="VarICON.html">ICON</a> contains an <a href="VarIF.html">IF</a>, which again is delayed with the <code>$percent</code> token and will also be evaluated for each SEARCH hit. Additionally, the <a class="foswikiCurrentTopicLink" href="#InsideOutLeftToRight">inside-out, left-to-right</a> rule discussed earlier means that this IF expression will be evaluated before <a href="VarICON.html">ICON</a>.
</li> <li> If <code>$topic</code> is a child of <a href="UserDocumentationCategory.html">UserDocumentationCategory</a>, the <code>info</code> icon is used; otherwise, <code>gear</code>.
</li></ul> 
</div>
<p></p>
<h3 id="Embedding_search_forms_to_return_a_formatted_result">  Embedding search forms to return a formatted result </h3>
<p></p>
Use an HTML form and an embedded formatted search on the same topic. You can link them together with an <a href="VarURLPARAM.html">URLPARAM</a> macro. Example:
<p></p>
<pre class="tml">
&#37;STARTSECTION{&#34;example7&#34;}&#37;
&#60;input type&#61;&#34;text&#34; id&#61;&#34;search&#95;field&#34; size&#61;&#34;32&#34; /&#62;
&#37;BUTTON{&#34;Search&#34; icon&#61;&#34;find&#34; id&#61;&#34;search&#95;button&#34;}&#37;

&#60;verbatim class&#61;&#34;jqLoader {section:&#39;example7&#95;results&#39;, mode:&#39;manual&#39;}&#34; id&#61;&#34;result&#95;loader&#34;&#62;
&#37;STARTSECTION{&#34;example7&#95;results&#34;}&#37;
&#60;div class&#61;&#34;search&#95;results&#34;&#62;
&#37;SEARCH{
   &#34;&#37;URLPARAM{&#34;q&#34; encode&#61;&#34;entity, quote&#34;}&#37;&#34;
   decode&#61;&#34;entity&#34;
   type&#61;&#34;keyword&#34;
   nosearch&#61;&#34;on&#34;
   format&#61;&#34;&#60;div class&#61;&#39;search&#95;hit&#39;&#62; &#91;&#91;&#36;web.&#36;topic&#93;&#93;
      &#60;div class&#61;&#39;search&#95;summary&#39;&#62;&#36;summary(searchcontext)&#60;!-- --&#62;&#60;/div&#62; 
      &#60;div class&#61;&#39;search&#95;info&#39;&#62;&#36;date, &#36;wikiusername&#60;/div&#62;
    &#60;/div&#62;&#34;
}&#37;
&#60;/div&#62;
&#37;ENDSECTION{&#34;example7&#95;results&#34;}&#37;
&#60;/verbatim&#62;

&#60;literal&#62;
&#60;script&#62;
jQuery(function(&#36;) {
  function doSearch() {
    &#36;(&#34;#result&#95;loader&#34;).trigger(&#34;refresh&#34;, {
      params: {
        q: &#36;(&#34;#search&#95;field&#34;).val()
      }
    });
    return false;
  };
  &#36;(&#34;#search&#95;button&#34;).on(&#34;click&#34;, doSearch);
  &#36;(&#34;#search&#95;field&#34;).on(&#34;keydown&#34;, function(ev) {
    if (ev.keyCode &#61;&#61; 13) {
      doSearch();
    }
  });
});
&#60;/script&#62;
&#60;style&#62;
.search&#95;results em {
  color:red;
}
.search&#95;hit {
  margin-bottom:1em;
}
.search&#95;info a,
.search&#95;info {
  color:#64B000;
}
&#60;/style&#62;
&#60;/literal&#62;
&#37;ENDSECTION{&#34;example7&#34;}&#37;
</pre>
<p></p>
<p></p>
<input type="text" id="search_field" size="32" />
<a href=".." class="jqButton " id="search_button"><span class='jqButtonIcon img' style='background-image:url(/foswiki/pub/System/FamFamFamSilkIcons/find.png)'></span><span class='jqButtonText'>Search</span></a>
<p></p>
<pre class="jqLoader {section:'example7_results', mode:'manual'}" id="result_loader">

&#60;div class&#61;&#34;search&#95;results&#34;&#62;
&#37;SEARCH{
   &#34;&#37;URLPARAM{&#34;q&#34; encode&#61;&#34;entity, quote&#34;}&#37;&#34;
   decode&#61;&#34;entity&#34;
   type&#61;&#34;keyword&#34;
   nosearch&#61;&#34;on&#34;
   format&#61;&#34;&#60;div class&#61;&#39;search&#95;hit&#39;&#62; &#91;&#91;&#36;web.&#36;topic&#93;&#93;
      &#60;div class&#61;&#39;search&#95;summary&#39;&#62;&#36;summary(searchcontext)&#60;!-- --&#62;&#60;/div&#62; 
      &#60;div class&#61;&#39;search&#95;info&#39;&#62;&#36;date, &#36;wikiusername&#60;/div&#62;
    &#60;/div&#62;&#34;
}&#37;
&#60;/div&#62;

</pre>
<p></p>

<script>
jQuery(function($) {
  function doSearch() {
    $("#result_loader").trigger("refresh", {
      params: {
        q: $("#search_field").val()
      }
    });
    return false;
  };
  $("#search_button").on("click", doSearch);
  $("#search_field").on("keydown", function(ev) {
    if (ev.keyCode == 13) {
      doSearch();
    }
  });
});
</script>
<style>
.search_results em {
  color:red;
}
.search_hit {
  margin-bottom:1em;
}
.search_info a,
.search_info {
  color:#64B000;
}
</style>

<p></p>
<p></p>
<hr />
<strong>Related topics:</strong> <a href="UserDocumentationCategory.html">UserDocumentationCategory</a>, <a href="SearchHelp.html">SearchHelp</a>, <a href="Macros.html">Macros#VarSEARCH</a>, <a href="SearchPatternCookbook.html">SearchPatternCookbook</a>, <a href="RegularExpression.html">RegularExpression</a>
<!--  -->
<hr />
<p></p>
<hr />
<p></p>
</body>