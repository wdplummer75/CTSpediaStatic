foswiki.Date={MONTH_LENGTHS:[31,28,31,30,31,30,31,31,30,31,30,31],MONTH_NUMBERS:{Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},_daysInYear:function(e){"use strict";return e%400?366:e%100?365:e%4?366:365},parseDate:function(e,p){"use strict";var t,s,r,d,g,E,a,R,$,x,n,i,f,u,I,c=0;if(e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),p&&(c=60*(new Date).getTimezoneOffset()*1e3),t=/(\d+)[\-\s]+([a-z]{3})[\-\s]+(\d+)(?:[\-\s]+(\d+):(\d+))?/i,e.match(t))return s=""!==RegExp.$1?parseInt(RegExp.$1,10):1,r=""!==RegExp.$2?foswiki.Date.MONTH_NUMBERS[RegExp.$2]-1:0,d=""!==RegExp.$3?parseInt(RegExp.$3,10):1,g=""!==RegExp.$4?parseInt(RegExp.$4,10):0,E=""!==RegExp.$5?parseInt(RegExp.$5,10):0,a=""!==RegExp.$6?parseInt(RegExp.$6,10):0,new Date(d,r,s,g,E,a).getTime()+c;if(t=/(\d\d\d\d)(?:-(\d\d)(?:-(\d\d))?)?(?:T(\d\d)(?::(\d\d)(?::(\d\d(?:\.\d+)?))?)?)?(Z|[\-+]\d\d(?::\d\d)?)?/,e.match(/T/)&&e.match(t)){if(d=RegExp.$1,r=""!==RegExp.$2?parseInt(RegExp.$2,10)-1:0,s=""!==RegExp.$3?parseInt(RegExp.$3,10):1,g=""!==RegExp.$4?parseInt(RegExp.$4,10):0,E=""!==RegExp.$5?parseInt(RegExp.$5,10):0,a=""!==RegExp.$6?parseInt(RegExp.$6,10):0,"Z"===(R=""!==RegExp.$7?RegExp.$7:""))c=0;else if(R.match(/([\-+])(\d\d)(?::(\d\d))?/)){var T=60*(""!==RegExp.$2?parseInt(RegExp.$2,10):0)+(""!==RegExp.$3?parseInt(RegExp.$3,10):0);c=60*(T*="-"===RegExp.$1?1:-1)*1e3}return new Date(d,r,s,g,E,a).getTime()+c}if(t=/^(\d\d+)(?:\s*[\/\s.\-]\s*(\d\d?)(?:\s*[\/\s.\-]\s*(\d\d?)(?:\s*[\/\s.\-]\s*(\d\d?)(?:\s*[:.]\s*(\d\d?)(?:\s*[:.]\s*(\d\d?))?)?)?)?)?$/,e.match(t)){if($=RegExp.$1,r=RegExp.$2,s=RegExp.$3,g=RegExp.$4,E=RegExp.$5,a=RegExp.$6,""!==r&&(r<1||r>12))return;if(x=""!==r?r-1:0,n=foswiki.Date.MONTH_LENGTHS[x],1===x&&366===foswiki.Date._daysInYear($)&&(n=29),""!==s&&(s<0||s>n))return;if(""!==g&&(g<0||g>24))return;if(""!==E&&(E<0||E>60))return;if(""!==a&&(a<0||a>60))return;if(""!==$&&$<60)return;return i=""!==s?s:1,f=""!==g?g:0,u=""!==E?E:0,I=""!==a?a:0,new Date($,x,i,f,u,I).getTime()+c}}};
