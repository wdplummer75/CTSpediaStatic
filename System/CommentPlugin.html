<!DOCTYPE html><html lang="en">
<head>
<title>CommentPlugin &lt; System &lt; Foswiki</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.5, user-scalable=yes" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<link type="image/x-icon" rel="icon" href="../MISSING RESOURCE System/CommentPlugin/favicon.ico"> <link href="../MISSING RESOURCE System/CommentPlugin/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="CommentPlugin.html" rel="alternate" title="edit CommentPlugin" type="application/x-wiki">
<meta name="description" content="CommentPlugin" />
<link media="all" class="head SMILIESPLUGIN" rel="stylesheet" href="SmiliesPlugin.attachments/smilies.css" type="text/css"><!--SMILIESPLUGIN-->
<style class='head TABLEPLUGIN_default' type="text/css" media="all">
body .foswikiTable {border-width:1px}
body .foswikiTable .tableSortIcon img {padding-left:.3em; vertical-align:text-bottom}
body .foswikiTable td {border-style:solid none; vertical-align:top}
body .foswikiTable th {border-style:none solid; vertical-align:top; background-color:#d6d3cf; color:#000000}
body .foswikiTable th a:link {color:#000000}
body .foswikiTable th a:visited {color:#000000}
body .foswikiTable th a:hover {color:#000000; background-color:#d6d3cf}
body .foswikiTable th.foswikiSortedCol {background-color:#c4c1ba}
body .foswikiTable tr.foswikiTableRowdataBg0 td {background-color:#ffffff}
body .foswikiTable tr.foswikiTableRowdataBg0 td.foswikiSortedCol {background-color:#f7f7f6}
body .foswikiTable tr.foswikiTableRowdataBg1 td {background-color:#f7f7f6}
body .foswikiTable tr.foswikiTableRowdataBg1 td.foswikiSortedCol {background-color:#f0f0ee}
</style><!--TABLEPLUGIN_default-->
<script class="script JQUERYPLUGIN" src="JQueryPlugin.attachments/jquery-2.2.4.js"></script><!--JQUERYPLUGIN-->
<script class="script JQUERYPLUGIN::OBSERVER" src="JQueryPlugin.attachments/plugins/observer/observer.js?version=0.1"></script><!--JQUERYPLUGIN::OBSERVER-->
<script class="script JQUERYPLUGIN::MIGRATE" src="JQueryPlugin.attachments/plugins/migrate/jquery.migrate.js?version=3.3.1"></script><!--JQUERYPLUGIN::MIGRATE-->
<script src="JQueryPlugin.attachments/plugins/foswiki/jquery.foswiki.js?version=3.01" class="script JQUERYPLUGIN::FOSWIKI"></script><!--JQUERYPLUGIN::FOSWIKI-->
<script src="JQueryPlugin.attachments/plugins/browser/jquery.browser.js?version=0.1.0" class="script JQUERYPLUGIN::BROWSER"></script><!--JQUERYPLUGIN::BROWSER-->
<script class="script JQUERYPLUGIN::METADATA" src="JQueryPlugin.attachments/plugins/metadata/jquery.metadata.js?version=2.1ef2bb44c86f5d0e98d55"></script><!--JQUERYPLUGIN::METADATA-->
<script src="JQueryPlugin.attachments/plugins/chili/jquery.chili.js?version=2.2_1" class="script JQUERYPLUGIN::CHILI"></script>
<script class="script JQUERYPLUGIN::CHILI" src="JQueryPlugin.attachments/plugins/chili/jquery.chili.init.js?version=2.2_1"></script><!--JQUERYPLUGIN::CHILI-->
<script class='script JQUERYPLUGIN::FOSWIKI::PREFERENCES foswikiPreferences' type='text/json'>{
   "SYSTEMWEB" : "System",
   "SCRIPTURL" : "http://biostat1478.dhcp.mc.vanderbilt.edu/foswiki/bin",
   "URLHOST" : "http://biostat1478.dhcp.mc.vanderbilt.edu",
   "PUBURL" : "http://biostat1478.dhcp.mc.vanderbilt.edu/foswiki/pub",
   "COOKIEREALM" : "",
   "WIKINAME" : "WikiAdmin",
   "SKIN" : "natedit,pattern",
   "SCRIPTURLPATH" : "/foswiki/bin",
   "SCRIPTSUFFIX" : "",
   "WIKIUSERNAME" : "Main.WikiAdmin",
   "USERSWEB" : "Main",
   "TOPIC" : "CommentPlugin",
   "SERVERTIME" : "08 Feb 2023 - 15:51",
   "WEB" : "System",
   "SCRIPTURLPATHS" : {},
   "NAMEFILTER" : "[\\\\\\s*?~^$@%`\"'&|<:;>\\[\\]#\\x00-\\x1f]",
   "PUBURLPATH" : "/foswiki/pub",
   "USERNAME" : "WikiAdmin"
}
</script><!--JQUERYPLUGIN::FOSWIKI::PREFERENCES-->
</head>
<body>
<h1 id="Comment_Plugin">  Comment Plugin </h1>
<p></p>
Comment Plugin lets users quickly post comments to a page without an edit/preview/save cycle.
<p></p>
<div class="foswikiToc" id="foswikiTOC"><span class="foswikiTocTitle">On this page:</span> <ul>
<li> <a href="#Features"> Features </a>
</li> <li> <a href="#Syntax"> Syntax </a>
</li> <li> <a href="#Parameters"> Parameters </a> <ul>
<li> <a href="#Positioning_the_comment"> Positioning the comment </a> <ul>
<li> <a href="#Location_relative_to_37COMMENT_tag"> Location relative to <code>%COMMENT</code> tag </a>
</li> <li> <a href="#Location_relative_to_an_anchor"> Location relative to an anchor </a>
</li></ul> 
</li> <li> <a href="#Default_templates"> Default templates </a>
</li></ul> 
</li> <li> <a href="#Customization"> Customization </a> <ul>
<li> <a href="#Defining_custom_templates"> Defining custom templates </a>
</li> <li> <a href="#Customization_example"> Customization example </a>
</li> <li> <a href="#The_61PROMPT_61_template"> The PROMPT template </a>
</li> <li> <a href="#The_61FORM_61_template"> The FORM template </a> <ul>
<li> <a href="#Providing_attribute_values"> Providing attribute values </a>
</li> <li> <a href="#Special_macros"> Special macros </a>
</li> <li> <a href="#Customisation_example_with_custom_form_template"> Customisation example with custom form template </a>
</li></ul> 
</li> <li> <a href="#The_61OUTPUT_61_template"> The OUTPUT template </a>
</li> <li> <a href="#Custom_access_controls"> Custom access controls </a>
</li></ul> 
</li> <li> <a href="#Settings"> Settings </a>
</li> <li> <a href="#Installation_Instructions"> Installation Instructions </a>
</li> <li> <a href="#Upgrade_Instructions"> Upgrade Instructions </a>
</li> <li> <a href="#Info"> Info </a>
</li></ul> 
</div>
<p></p>
Related topics: <a href="CommentPluginTemplate.html">CommentPluginTemplates</a>, <a href="../Sandbox/CommentPluginExamples.html">CommentPluginExamples</a>
<p></p>
<h2 id="Features">  Features </h2>
<p></p>
Inserts an edit box into the page that allows users to type in and save comments. Comments can be made <ul>
<li> in different formats (as defined by a template),
</li> <li> in both forward and reverse chronological order,  
</li> <li> signed or unsigned, dated or undated (as defined by a template),
</li> <li> in other topics, or other positions within the current topic.
</li></ul> 
<p></p>
Supports the definition of custom templates for prompts and for formatting
what is placed into topics.
<p></p>
Supports custom access controls, allowing you to use it to add content to
topics where the commenting user doesn't have CHANGE permissions.
<p></p>
Uses Javascript (if available) to ensure feedback is as rapid as possible.
<p></p>
<h2 id="Syntax">  Syntax </h2>
<span id="StandardAttrs"></span>
Write <code>%COMMENT{<i>attributes</i>}%</code> anywhere in a topic.
<p></p>
<h2 id="Parameters">  Parameters </h2> <ul>
<li> The following standard attributes are recognized                <table class="foswikiTable" id="tableCommentPlugin1" rules="none">     	<thead>		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">			<th class="foswikiTableCol0 foswikiFirstCol"> Name </th>			<th class="foswikiTableCol1"> Description </th>			<th class="foswikiTableCol2 foswikiLastCol"> Default </th>		</tr>	</thead>     	<tbody>		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">			<td class="foswikiTableCol0 foswikiFirstCol"> <code>type</code> </td>			<td class="foswikiTableCol1"> This is the name of the template to use for this comment. Comment templates are defined in a Foswiki template - see <a class="foswikiCurrentTopicLink" href="#TemPlates">Customisation</a>, below. If this attribute is not defined, the type is whatever is defined by <code>COMMENTPLUGIN_DEFAULT_TYPE</code> <a href="PreferenceSettings.html">preference setting</a>. </td>			<td class="foswikiTableCol2 foswikiLastCol"> <code>below</code> </td>		</tr>		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">			<td class="foswikiTableCol0 foswikiFirstCol"> <code>default</code> </td>			<td class="foswikiTableCol1"> Default text to put into the prompt. </td>			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>		</tr>		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">			<td class="foswikiTableCol0 foswikiFirstCol"> <code>target</code> </td>			<td class="foswikiTableCol1"> Name of the topic to add the comment to </td>			<td class="foswikiTableCol2 foswikiLastCol"> the current topic </td>		</tr>		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">			<td class="foswikiTableCol0 foswikiFirstCol"> <code>mode</code> </td>			<td class="foswikiTableCol1"> For compatibility with older versions only, synonymous with <code>type</code> </td>			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>		</tr>		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">			<td class="foswikiTableCol0 foswikiFirstCol"> <code>nonotify</code> </td>			<td class="foswikiTableCol1"> Set to "on" to disable change notification for target topics </td>			<td class="foswikiTableCol2 foswikiLastCol"> <code>off</code> </td>		</tr>		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">			<td class="foswikiTableCol0 foswikiFirstCol"> <code>noform</code> </td>			<td class="foswikiTableCol1"> Set to "on" to disable the automatic form that is generated around your comment prompt if you don't provide a <code>FORM</code> template. See <a href="../Sandbox/CommentPluginExamples.html">CommentPluginExamples:noform</a> for an example. </td>			<td class="foswikiTableCol2 foswikiLastCol"> <code>off</code> </td>		</tr>		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">			<td class="foswikiTableCol0 foswikiFirstCol"> <code>nopost</code> </td>			<td class="foswikiTableCol1"> Set to "on" to disable insertion of the posted text into the topic. </td>			<td class="foswikiTableCol2 foswikiLastCol"> <code>off</code> </td>		</tr>		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">			<td class="foswikiTableCol0 foswikiFirstCol"> <code>remove</code> </td>			<td class="foswikiTableCol1"> Set to "on" to remove the comment prompt after the first time it is clicked. </td>			<td class="foswikiTableCol2 foswikiLastCol"> <code>off</code> </td>		</tr>		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> <code>button</code> </td>			<td class="foswikiTableCol1 foswikiLast"> Button label text </td>			<td class="foswikiTableCol2 foswikiLastCol foswikiLast"> <code>Add comment</code> </td>		</tr>	</tbody>     </table>
</li></ul> 
<p></p>
(See also <a href="#MoreAttrs" class="foswikiCurrentTopicLink">additional attributes</a>)
<p></p>
<h3 id="Positioning_the_comment">  Positioning the comment </h3>
<code>%COMMENT</code> supports several ways to specify <em>where</em> a comment should be inserted in the target topic. This is referred to as the <em>location</em> of the comment.
<p></p>
<h4 id="Location_relative_to_37COMMENT_tag">  Location relative to <code>%COMMENT</code> tag </h4>
The default <em>location</em> is the <code>%COMMENT</code> tag itself. For example:
<pre class="tml">
&#37;COMMENT{type&#61;&#34;below&#34;}&#37;
</pre>
will add comments in the current topic, directly below the <code>%COMMENT</code> tag.
<p></p>
<h4 id="Location_relative_to_an_anchor">  Location relative to an anchor </h4>
The <code>target</code> attribute may specify a web, and may also specify an anchor within the target topic; for example, 
<pre class="tml">
&#37;COMMENT{type&#61;&#34;above&#34; target&#61;&#34;&#37;USERSWEB&#37;.PersonalRemarks#InsertHere&#34;}&#37;
</pre>
This uses a standard in-topic anchor as the insertion location. See <a href="EditingShorthand.html">EditingShorthand</a> for more about Foswiki anchors.
<p></p>
<h3 id="Default_templates">  Default templates </h3>
Templates are used to define the "comment style" i.e. how comments appear in the page. The default is to add comments in "Blog like" style using bulleted lists, with the most recent comment at the top, but many other styles are available such as tables or Wiki thread mode comments. It is easy to define your own customer styles as well.
<p></p>
A set of default comment templates are shipped with the plugin - see also <a href="CommentPluginTemplate.html">CommentPluginTemplates</a>:
<table class="foswikiTable" rules="none">
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a rel="nofollow" href="../PublishPlugin/publish.html" title="Sort by this column">Template type</a> </th>
			<th class="foswikiTableCol1 foswikiLastCol"> <a title="Sort by this column" href="../PublishPlugin/publish.html" rel="nofollow">Description</a> </th>
		</tr>
	</thead>
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>top</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Comments, signed and dated (server time), added at top of the topic (the anchor is ignored) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>bottom</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Comments, signed and dated (server time), added at end of the target topic (the anchor is ignored) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>above</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Comments, signed and dated (server time), added immediately before the target anchor, or the <code>%COMMENT</code> if no anchor is specified </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>bulletabove</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Comments, signed and dated (server time), bullet point added immediately before the target anchor, or the <code>%COMMENT</code> if no anchor is specified (inputsize="20" can be used to set the input length) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>below</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Comments, signed and dated (server time), added immediately below the target anchor, or the <code>%COMMENT</code> if no anchor is specified </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>after</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Comments, signed and dated (server time), added added before the comment box, after the last comment </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>belowthreadmode</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Comments, signed and dated, added recurse after comment box </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>threadmode</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Wiki thread mode comment, signed and dated (server time) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>tableprepend</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Comments, signed and dated (server time), formatted as an HTML table row, added below the anchor (which must be in an HTML &lt;table&gt;) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>tableappend</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Comments, signed and dated (server time), formatted as an HTML table row, added above the anchor (which must be in an HTML &lt;table&gt;) </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>action</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Action added to action table directly above comment box (see <a href="#Installation">Plugin Installation Instructions</a> below for important notes) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>table</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Tablerows adding on end </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>toctalk</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Talk using TOC adding on end </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>bookmark</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Create a list of annotated bookmarks </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> <code>return</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol foswikiLast"> Post to a different topic and return </td>
		</tr>
	</tbody></table>
<p></p>
Your local installation may add more template types as well - see <a class="foswikiCurrentTopicLink" href="#TemPlates">Customization</a>, below.
<p></p>
<span id="TemPlates"></span>
<h2 id="Customization">  Customization </h2>
Customization of the comment plugin requires <ul>
<li> familiarity with HTML forms
</li> <li> some familiarity with the <a href="SkinTemplates.html">Skin Templates</a>.
</li></ul> 
<p></p>
To define a comment type, you have to provide at least two simple template definitions in the template file; one for the prompt box, and one for the generated output. If we have a template type "mytype", these are named <code>PROMPT:mytype</code> and <code>OUTPUT:mytype</code> respectively. See <code>comments.tmpl</code> in the templates directory for examples.
<p></p>
The plugin picks up these template definitions from a standard template file, <code>templates/comments.tmpl</code>. This allows different templates to be defined for different Foswiki skins.
<p></p>
<h3 id="Defining_custom_templates">  Defining custom templates </h3>
By default, <code>templates/comments.tmpl</code> includes the topic <a href="CommentPluginTemplate.html">CommentPluginTemplate</a>, which contains all the shipped standard templates and in turn includes System.UserCommentsTemplate that can include non-standard customizations.
<p></p>
This allows for several levels of customization: <ol>
<li> To <strong>override all default templates, everywhere</strong>, change <code>comments.tmpl</code> to include a different topic (this customization will be lost next time you upgrade, though).
</li> <li> To add <strong>site-wide local template customizations</strong>, add them to <a class="foswikiNewLink" rel="nofollow" href="UserCommentsTemplate.html" title="Create this topic">UserCommentsTemplate</a> (create if it does not exist yet). You can redefine the standard templates here if you want, and your definitions will override the standard definitions.
</li> <li> To override templates on a <strong>web-by-web basis</strong>, add a topic <code>UserCommentsTemplate</code> to the web (this will replace System.UserCommentsTemplate)
</li> <li> To override templates <strong>for a specific skin</strong>, add them to System.UserComments&lt;Skin&gt;Template (where &lt;Skin&gt; is the name of the skin with the first letter capitalized, e.g. Pattern)
</li></ol> 
<p></p>
You can also define a <strong>comment template in a topic</strong>, by passing the topic location with <code>templatetopic</code>. For example:
<p></p>
<pre class="tml">
&#37;COMMENT{
   type&#61;&#34;blogpost&#34;
   templatetopic&#61;&#34;BlogPostCommentTemplate&#34;
   target&#61;&#34;&#37;TOPIC&#37;&#34;
   button&#61;&#34;Add comment&#34;
}&#37;
</pre>
<p></p>
<code>templatetopic</code> accepts <code>topic</code> or <code>web.topic</code> syntax. See an example in <a href="../Sandbox/CommentPluginExamples.html">CommentPluginExamples:templatetopic</a>.
<p></p>
<p></p>
<p></p>
<div class="foswikiHelp"> <img height="16" alt="ALERT!" src="DocumentGraphics.attachments/warning.png" width="16" title="ALERT!"> Templates are picked up by following the <a href="SkinTemplates.html">standard rules for locating template files</a>. Note that you can use <code>%TMPL:INCLUDE</code> to include other files of templates.</div>
<p></p>
<h3 id="Customization_example">  Customization example </h3>
Provide both a <code>PROMPT</code> and an <code>OUTPUT</code> definition:
<p></p>
<pre class="tml">
&#37;TMPL:DEF{PROMPT:myComment}&#37;&#37;TMPL:P{promptbox}&#37;&#37;TMPL:END&#37;
&#37;TMPL:DEF{OUTPUT:myComment}&#37;&#37;TMPL:P{outputoneliner}&#37;&#37;POS:TOP&#37;
&#37;TMPL:END&#37;
</pre>
<p></p>
Call your custom comment with:
<p></p>
<pre class="tml">
&#37;COMMENT{type&#61;&#34;myComment&#34;}&#37;
</pre>
<p></p>
<h3 id="The_61PROMPT_61_template">  The <code>PROMPT</code> template </h3>
The <code>PROMPT</code> template defines the contents of an HTML form that is used to capture the comment. This form invokes the comment generator when submitted. Parameters to the comment generator are defined using standard HTML input fields, such as <code>input</code>, <code>textarea</code> and <code>select</code>. The user enters values for these parameters, and these are then available when the <code>OUTPUT</code> template is expanded, in the form of <code>%URLPARAM%</code>s.
<p></p>
<h3 id="The_61FORM_61_template">  The <code>FORM</code> template </h3>
The <code>FORM</code> template can optionally be provided if you want to explicitly
define the form (the <code>&lt;form&gt;</code> and <code>&lt;/form&gt;</code> tHTML ags) that wraps around the <code>PROMPT</code> template. If you don't define
a <code>FORM=template, one is automatically generated for you (unless the =noform="on"</code> parameter is given).
<p></p>
<span id="MoreAttrs"></span>
<h4 id="Providing_attribute_values">  Providing attribute values </h4>
If an attribute is given to the <code>%COMMENT</code> tag that is not one of the <a class="foswikiCurrentTopicLink" href="#StandardAttrs">standard attributes</a>, then that attribute is taken as the name of a parameter to be expanded in the <code>PROMPT</code> template. Expressions in the template of the form <code>%</code><i>param</i><code>|</code><i>default</i><code>%</code> (e.g. <code>%rows|3%</code>, <code>%button|Push me%</code>) are expanded to the values given in the <code>%COMMENT</code>. For example, if the <code>PROMPT</code> template 'example' contains:
<pre class="tml">
&#60;textarea rows&#61;&#34;&#37;rows&#124;3&#37;&#34; cols&#61;&#34;&#37;cols&#124;50&#37;&#34; value&#61;&#34;&#37;tval&#124;Rubbish&#37;&#34;&#62;
</pre>
and the %COMMENT tag is:
<pre class="tml">
&#37;COMMENT{type&#61;&#34;example&#34; cols&#61;&#34;75&#34;}&#37;
</pre>
then the template will be expanded as
<pre class="tml">
&#60;textarea rows&#61;&#34;3&#34; cols&#61;&#34;75&#34; value&#61;&#34;Rubbish&#34;&#62;
</pre>
<p></p>
<h4 id="Special_macros">  Special macros </h4>
As well as support for all the usual macros in templates, the following special macros are supported in the <code>PROMPT</code> definition:
       <table class="foswikiTable" rules="none">    
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a title="Sort by this column" rel="nofollow" href="../PublishPlugin/publish.html">Macro</a> </th>
			<th class="foswikiTableCol1 foswikiLastCol"> <a href="../PublishPlugin/publish.html" rel="nofollow" title="Sort by this column">Description</a> </th>
		</tr>
	</thead>    
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>%DISABLED%</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Set to 'disabled' when you cannot comment (e.g. in preview mode). </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> <code>%MESSAGE%</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol foswikiLast"> The text specified by <code>default</code>. This may be overridden by a helpful message when the prompt is DISABLED. </td>
		</tr>
	</tbody>    </table>
<p></p>
Within a <code>FORM</code> definition, the body of the prompt is expanded to replace
the <code>%COMMENTPROMPT%</code> macro.
<p></p>
<strong>EXPERT</strong> Note that when a comment is saved, the <code>rest</code> script is invoked on the target topic, with a number of parameters provided by the comment form. Normally the <a href="CommentPlugin.html" class="foswikiCurrentTopicLink">CommentPlugin</a> will provide these fields in the form, but experts can also provide the fields themselves in order to get finer control over what is submitted, or you might want to define your own HTML forms that do comment submission. The parameters that the <a class="foswikiCurrentTopicLink" href="CommentPlugin.html">CommentPlugin</a> recognises are as follows:
<table class="foswikiTable" rules="none">
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a rel="nofollow" href="../PublishPlugin/publish.html" title="Sort by this column">CGI parameter</a> </th>
			<th class="foswikiTableCol1 foswikiLastCol"> <a href="../PublishPlugin/publish.html" rel="nofollow" title="Sort by this column">Description</a> </th>
		</tr>
	</thead>
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>comment_action</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Must be <code>save</code> to get the <a class="foswikiCurrentTopicLink" href="CommentPlugin.html">CommentPlugin</a> to perform </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>comment_type</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Type of the OUTPUT template </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>comment_index</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Zero-based index of the %COMMENT in the source topic. Used to place a post relative to an existing %COMMENT. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>comment_anchor</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Anchor taken from the <code>target</code> spec </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>comment_nonotify</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> As passed to %COMMENT </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>comment_remove</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Zero-based index of a %COMMENT to remove from the target topic </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>comment_nopost</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> As passed to %COMMENT </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>comment_templatetopic</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> As passed to %COMMENT </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> <code>comment_target</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol foswikiLast"> Alternate save topic as passed to %COMMENT </td>
		</tr>
	</tbody></table>
Note that <code>comment_anchor</code> overrides <code>comment_index</code>. Example, shows an "I Approve" button that adds your approval signature to the end of the topic:
<pre class="tml">
&#60;form method&#61;&#34;post&#34; action&#61;&#34;&#37;SCRIPTURL{restauth}&#37;/CommentPlugin/comment&#34; &#62;
&#60;input type&#61;&#34;submit&#34; value&#61;&#34;I Approve&#34; /&#62;
&#60;input type&#61;&#34;hidden&#34; name&#61;&#34;topic&#34; value&#61;&#34;&#37;WEB&#37;/&#37;TOPIC&#37;&#34; /&#62;
&#60;input type&#61;&#34;hidden&#34; name&#61;&#34;redirectto&#34; value&#61;&#34;&#37;WEB&#37;/&#37;TOPIC&#37;&#34; /&#62;
&#60;input type&#61;&#34;hidden&#34; name&#61;&#34;comment&#95;action&#34; value&#61;&#34;save&#34; /&#62;
&#60;input type&#61;&#34;hidden&#34; name&#61;&#34;comment&#95;type&#34; value&#61;&#34;bottom&#34; /&#62;
&#60;input type&#61;&#34;hidden&#34; name&#61;&#34;comment&#34; value&#61;&#34;I Approve&#34; /&#62;
&#60;/form&#62;
</pre>
<p></p>
<h4 id="Customisation_example_with_custom_form_template">  Customisation example with custom form template </h4>
<div class="foswikiAlert"> <img width="16" title="ALERT!" alt="ALERT!" height="16" src="DocumentGraphics.attachments/warning.png"> <strong>This method has critical differences from the version shipped with Foswiki 1.1.4!</strong> (Identified by <img height="16" alt="ALERT!" src="DocumentGraphics.attachments/warning.png" width="16" title="ALERT!">) </div>
Write a custom form in a topic. <ul>
<li> <img width="16" title="ALERT!" alt="ALERT!" height="16" src="DocumentGraphics.attachments/warning.png"> In the form, the <code>action</code> must be <code>%SCRIPTURL{"rest"}%/CommentPlugin/comment</code>.   The save script used in previous versions will not work.
</li> <li> <img title="ALERT!" width="16" src="DocumentGraphics.attachments/warning.png" height="16" alt="ALERT!"> In the form, the <code>topic</code> must be set to a valid, existing <code>Web.Topic</code>.  <code>topic</code> is validated by the <code>rest</code> script which will reject the request if invalid.
</li> <li> <img width="16" title="ALERT!" height="16" alt="ALERT!" src="DocumentGraphics.attachments/warning.png"> In the form, if the target topic will be provided by user input, use the <code>comment_target</code> input field to identify the target, otherwise it defaults to <code>topic</code> setting.  <code>comment_target</code> is more flexible and can omit the Web part.
</li> <li> In the form set the location of the prompt with <code>%COMMENTPROMPT%</code>; the prompt will be positioned here.
</li> <li> In %COMMENT use parameter <code>noform="on"</code>
</li> <li> In %COMMENT use parameter <code>templatetopic</code> to point to the topic with the form template
</li></ul> 
<p></p>
Example form:
<pre class="tml">
&#37;TMPL:DEF{FORM:example}&#37;
&#60;form method&#61;&#34;post&#34; action&#61;&#34;&#37;SCRIPTURL{rest}&#37;/CommentPlugin/comment&#34; enctype&#61;&#34;application/x-www-form-urlencoded&#34; name&#61;&#34;examplecomment&#34; id&#61;&#34;examplecomment&#34;&#62;
&#60;input type&#61;&#34;hidden&#34; name&#61;&#34;topic&#34;  value&#61;&#34;&#37;BASEWEB&#37;/&#37;BASETOPIC&#37;&#34; /&#62; 
&#60;input type&#61;&#34;hidden&#34; name&#61;&#34;redirectto&#34; value&#61;&#34;&#37;BASEWEB&#37;.&#37;BASETOPIC&#37;&#34; /&#62;
&#37;COMMENTPROMPT&#37;
&#60;/form&#62;
&#37;TMPL:END&#37;
</pre>
<p></p>
Example comment:
<pre class="tml">
&#37;COMMENT{
   type&#61;&#34;example&#34;
   templatetopic&#61;&#34;&#37;SANDBOXWEB&#37;.CommentPluginTemplateExample&#34;
   target&#61;&#34;&#37;TOPIC&#37;&#34;
   button&#61;&#34;Add comment&#34;
}&#37;
</pre>
<p></p>
<h3 id="The_61OUTPUT_61_template">  The <code>OUTPUT</code> template </h3>
The <code>OUTPUT</code> template defines the format for the text that actually gets embedded into the topic. All the usual macros are available in the <code>PROMPT</code> definition,
but note that a subset of macros are expanded <em>when the comment is inserted in the text</em>, so time, date and username will refer to the time and date when the comment was made, and the user who made it.
<p></p>
The expanded variables are: <ul>
<li> <code>%DATE%</code> Signature-format date <a href="VarDATE.html">VarDATE</a>
</li> <li> <code>%SERVERTIME%</code> See <a href="VarSERVERTIME.html">VarSERVERTIME</a>
</li> <li> <code>%GMTIME%</code> See <a href="VarGMTIME.html">VarGMTIME</a>
</li> <li> <code>%USERNAME%</code> Base login name - <a href="VarUSERNAME.html">VarUSERNAME</a>
</li> <li> <code>%WIKINAME%</code> Wiki name - <a href="VarWIKINAME.html">VarWIKINAME</a>
</li> <li> <code>%WIKIUSERNAME%</code> Wiki name with prepended web - <a href="VarWIKIUSERNAME.html">VarWIKIUSERNAME</a>
</li> <li> <code>%URLPARAM{...}%</code> - Parameters to the current CGI query - <a href="VarURLPARAM.html">VarURLPARAM</a>
</li> <li> <code>%NOP%</code> No-op - <a href="VarNOP.html">VarNOP</a>
</li></ul> 
<p></p>
All other Macros are inserted into the topic un-expanded and are expanded by standard rendering when the topic containing the comment is viewed.
<p></p>
In addition to Macros, there is one "token" expanded during output.  <code>$encodeguest</code> will be set to "off" when the commenting user is logged in, and set to "entity" for anonymous comments.
This is used in combination with the <code>%URLPARAM%</code> macro.  Any user input from untrusted users should be entity encoded.  For example:
<pre>
&#37;TMPL:DEF{outputoneliner}&#37;   &#42; &#37;URLPARAM{&#34;comment&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37; -- &#37;WIKIUSERNAME&#37; - &#37;GMTIME{&#34;&#36;day &#36;month &#36;year&#34;}&#37;&#37;TMPL:END&#37;
</pre>
<p></p>
There are also four position tags that are used to indicate where the comment should be placed, relative to the location defined in the <code>%COMMENT</code> tag:
<p></p>
        <table class="foswikiTable" rules="none">    
	<tbody>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>%POS:TOP%</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> If present, comments will be inserted <strong>at the top of the topic</strong> i.e. before any other text </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>%POS:BOTTOM%</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> If present, comments will be inserted <strong>at the end of the topic</strong> i.e. after all existing text </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>%POS:BEFORE%</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol"> If present, comments will be inserted <b>immediately before the <code>%COMMENT%</code> tag</b> </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> <code>%POS:AFTER%</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol foswikiLast"> If present, comments will be inserted <b>immediately after the <code>%COMMENT%</code> tag</b> </td>
		</tr>
	</tbody>    </table>
Note that these position tags are obviously mutually exclusive. If you define more than one, the result is undefined. If none is present, the default is taken from the plugin setting <code>DEFAULT_TYPE</code>
<p></p>
     <table class="foswikiTable" rules="none">    
	<tbody>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> <code>%COMMENTPROMPT%</code> </td>
			<td class="foswikiTableCol1 foswikiLastCol foswikiLast"> Use with a custom form. If present, the comment prompt will be positioned here. </td>
		</tr>
	</tbody>    </table>
<p></p>
All the <a href="TemplateTopics.html">usual macros</a> that can be used in a topic template can also be used in an <code>OUTPUT</code> template.
<p></p>
<h3 id="Custom_access_controls">  Custom access controls </h3>
Using <code>configure</code>, the plugin can be configured to use a different access control domain than the default CHANGE.
This allows you to use the plugin to add content to topics where the commenting user does not have CHANGE (or even VIEW) access.
<p></p>
<div class="foswikiHelp"><img src="DocumentGraphics.attachments/warning.png" height="16" alt="ALERT!" title="ALERT!" width="16"> <strong>Caution</strong> If you configure this plugin to use <code>COMMENT</code> permission instead of <code>CHANGE</code>, you should ensure that every web has the desired
default permission by configuring <code>ALLOWWEBCOMMENT</code> or <code>DENYWEBCOMMENT</code> in every WebPreferences topic.  You should also configure appropriate defaults in the <code>_default</code> Template web.
If default permissions are not configured, then commenting will be permitted.
</div>
<p></p>
<h2 id="Settings">  Settings </h2>
<!-- Not used by the plugin <ul>
<li> Set SHORTDESCRIPTION = Quickly post comments to a page without an edit/save cycle
</li></ul> 
<p></p>
-->
Two <a href="PreferenceSettings.html">preference settings</a> are recognised by the <a href="CommentPlugin.html" class="foswikiCurrentTopicLink">CommentPlugin</a>:
<table class="foswikiTable" rules="none">
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a title="Sort by this column" href="../PublishPlugin/publish.html" rel="nofollow">Preference</a> </th>
			<th class="foswikiTableCol1"> <a href="../PublishPlugin/publish.html" rel="nofollow" title="Sort by this column">Default</a> </th>
			<th class="foswikiTableCol2 foswikiLastCol"> <a href="../PublishPlugin/publish.html" rel="nofollow" title="Sort by this column">Description</a> </th>
		</tr>
	</thead>
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>%COMMENTPLUGIN_TEMPLATES%</code> </td>
			<td class="foswikiTableCol1"> <code>comments</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> Name of template file in the 'templates' directory that contains the comment templates. The default 'comments.tmpl' automatically includes user templates from <a href="CommentPluginTemplate.html">CommentPluginTemplate</a>, which in turn includes <a title="Create this topic" href="UserCommentsTemplate.html" class="foswikiNewLink" rel="nofollow">UserCommentsTemplate</a>. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> <code>%COMMENTPLUGIN_DEFAULT_TYPE%</code> </td>
			<td class="foswikiTableCol1 foswikiLast"> <code>above</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol foswikiLast"> Default template type </td>
		</tr>
	</tbody></table>
These can be set in <a href="../Main/SitePreferences.html">SitePreferences</a>, in each web's WebPreferences, or in individual topics.
<p></p>
#Installation
<h2 id="Installation_Instructions">  Installation Instructions </h2>
You do not need to install anything in the browser to use this extension. The following instructions are for the administrator who installs the extension on the server.
<p></p>
Open configure, and open the "Extensions" section. "Extensions Operation and Maintenance" Tab -&gt; "Install, Update or Remove extensions" Tab.  Click the "Search for Extensions" button.  
Enter part of the extension name or description and press search.   Select the desired extension(s) and click install. If an extension is already installed, it will <strong>not</strong> show up in the
search results.
<p></p>
You can also install from the shell by running the extension installer as the web server user: (Be sure to run as the webserver user, not as root!)
<pre>
cd /path/to/foswiki
perl tools/extension&#95;installer &#60;NameOfExtension&#62; install
</pre>
<p></p>
If you have any problems, or if the extension isn't available in <code>configure</code>, then you can still install manually from the command-line. See <a href="https://foswiki.org/Support/ManuallyInstallingExtensions">https://foswiki.org/Support/ManuallyInstallingExtensions</a> for more help.
<p></p>
<p></p>
Note that if you want to use the <code>action</code> template then you must also: <ol>
<li> Install the <a title="'Extensions/ActionTrackerPlugin' on foswiki.org" class="interwikiLink" href="https://foswiki.org/Extensions/ActionTrackerPlugin"><noautolink>Foswiki:Extensions/ActionTrackerPlugin</noautolink></a>;
</li> <li> Put the CommentPlugin <strong>before</strong> the ActionTrackerPlugin in the <code>{PluginsOrder}</code> configuration option (in <code>configure</code>)
</li></ol> 
<p></p>
<h2 id="Upgrade_Instructions">  Upgrade Instructions </h2>
<p></p>
This plugin has been significantly changed from the <code>10 April 2011</code> version shipped with Foswiki 1.1.4.   <ul>
<li> The plugin uses a <code>rest</code> handler to update topics.  By default this script does not require authentication, and can now permit anonymous commenting.  Examine the <a href="../.html">http://biostat1478.dhcp.mc.vanderbilt.edu/foswiki/bin/configure</a> ( <code>Security and Authentication</code> tab, <code>Login</code> sub-tab ) configuration <code>{AuthScripts}</code> setting, and the scripts requiring authentication in the Apache configuration.
</li> <li> The plugin no longer processes %COMMENT macros during save.  If you have developed any forms using the <a href="../Sandbox/CommentPluginExamples.html"><code>noform</code> and <code>templatetopic</code> examples</a> they must be revised.
</li></ul> 
<p></p>
<h2 id="Info">  Info </h2>
<p></p>
<table class="foswikiTable" rules="none">
	<tbody>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> Change History: </td>
			<td class="foswikiTableCol1 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.94 (13 Oct 2020) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item14941' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item14941"><noautolink>Foswikitask:Item14941</noautolink></a>: only load comment.js and comment.css on pages where it is required </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.93 (22 Jan 2018) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item14554' on the 'Foswiki' issue tracking site" href="https://foswiki.org/Tasks/Item14554" class="interwikiLink"><noautolink>Foswikitask:Item14554</noautolink></a>: remove link to unused wikiring.com domain.<br/>                        <a title="'Item14605' on the 'Foswiki' issue tracking site" href="https://foswiki.org/Tasks/Item14605" class="interwikiLink"><noautolink>Foswikitask:Item14605</noautolink></a>: Unescaped brace in Regular Expression,   Perl 5.27.8. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.92 (21 Jan 2017) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item14009' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item14009"><noautolink>Foswikitask:Item14009</noautolink></a>: Comment plugin does not properly identify location to insert comment when specified as an anchor. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.91 (08 Apr 2016) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item14022' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item14022"><noautolink>Foswikitask:Item14022</noautolink></a>: Update Foswiki.org links to https. Released with Foswiki 2.1.1. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.9 (03 Feb 2016) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item13854' on the 'Foswiki' issue tracking site" href="https://foswiki.org/Tasks/Item13854" class="interwikiLink"><noautolink>Foswikitask:Item13854</noautolink></a>: Set ALLOWTOPICVIEW = "*" on Comment Template.  <strong>Requires compatibility patch on Foswiki 1.x or Foswiki 1.1.10.</strong> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.8 (15 Nov 2015) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a class="interwikiLink" href="https://foswiki.org/Tasks/Item13852" title="'Item13852' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item13852</noautolink></a>: Warn that COMMENT ACLs should be configured if enabled. Also suppress guest session warning on Foswiki 1.1. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.7 (29 Sep 2015) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item13576' on the 'Foswiki' issue tracking site" href="https://foswiki.org/Tasks/Item13576" class="interwikiLink"><noautolink>Foswikitask:Item13576</noautolink></a>: Disable fields during submit, then clear input fields after comment is posted.<br/>                       <a class="interwikiLink" href="https://foswiki.org/Tasks/Item13764" title="'Item13764' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item13764</noautolink></a>: Entity encode any comments by guest users. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.6 (24 Jul 2015) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a class="interwikiLink" href="https://foswiki.org/Tasks/Item13502" title="'Item13502' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item13502</noautolink></a>: Expand macros when returning an inline Ajax response. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.5 (24 Jun 2015) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item13474' on the 'Foswiki' issue tracking site" href="https://foswiki.org/Tasks/Item13474" class="interwikiLink"><noautolink>Foswikitask:Item13474</noautolink></a>: Unicode fix </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.4 (14 Jun 2015) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a href="https://foswiki.org/Tasks/Item13423" class="interwikiLink" title="'Item13423' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item13423</noautolink></a>: Perl 5.20 deprecations<br />                        <a title="'Item13345' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item13345"><noautolink>Foswikitask:Item13345</noautolink></a>: CGI deprecations<br />                        <a title="'Item13287' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item13287"><noautolink>Foswikitask:Item13287</noautolink></a>: Regular expression fixes<br />                        <a title="'Item13125' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item13125"><noautolink>Foswikitask:Item13125</noautolink></a>: CGI parm calling changes </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.3 (18 Dec 2014) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item12855' on the 'Foswiki' issue tracking site" href="https://foswiki.org/Tasks/Item12855" class="interwikiLink"><noautolink>Foswikitask:Item12855</noautolink></a>: Core extensions should require <a href="JQueryPlugin.html">JQueryPlugin</a> 6.00<br />                        <a href="https://foswiki.org/Tasks/Item13125" class="interwikiLink" title="'Item13125' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item13125</noautolink></a>: CGI changes for multi-value parameters<br />                        <a href="https://foswiki.org/Tasks/Item13096" class="interwikiLink" title="'Item13096' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item13096</noautolink></a>: incorrect handling of unauthorised response<br />                        <a title="'Item13105' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item13105"><noautolink>Foswikitask:Item13105</noautolink></a>: Eliminate sort from tables in Macros<br />                        <a title="'Item13106' on the 'Foswiki' issue tracking site" href="https://foswiki.org/Tasks/Item13106" class="interwikiLink"><noautolink>Foswikitask:Item13106</noautolink></a>: removed blockquote where possible<br />                        <a title="'Item13027' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item13027"><noautolink>Foswikitask:Item13027</noautolink></a>: Most try..catch clauses were catching Error::Simple s/b Error<br />                        <a class="interwikiLink" href="https://foswiki.org/Tasks/Item11737" title="'Item11737' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item11737</noautolink></a>: Change hardcoded Main to <code>%USERSWEB%</code> Replace Sandbox with <code>%SANDBOXWEB%</code> <br />                        <a title="'Item12900' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item12900"><noautolink>Foswikitask:Item12900</noautolink></a>: Implement some session handling improvements </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.2 (26 Sep 2014) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a href="https://foswiki.org/Tasks/Item12931" class="interwikiLink" title="'Item12931' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item12931</noautolink></a>: add a highlight to JS-added comments; fix no-JS comments </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.1 (25 Apr 2014) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a class="interwikiLink" href="https://foswiki.org/Tasks/Item10191" title="'Item10191' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item10191</noautolink></a>: Recoded REST as a proper JQuery plugin, with correctly formatted insertions. Note that the old <code>location</code> parameter has been <strong>removed</strong>, as it never worked properly, could cause damage to topics, and could not work with client comments. If you were using it, apologies, but it had to go. Correct use of validation and authentication. Ready for 2.0. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.0.3 (22 Feb 2012) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a href="https://foswiki.org/Tasks/Item11448" class="interwikiLink" title="'Item11448' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item11448</noautolink></a> - Implement {GuestCanComment}. If enabled, guests can comment on topics that they can not edit. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.0.2 (30 Jan 2012) 12887 </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a href="https://foswiki.org/Tasks/Item11447" class="interwikiLink" title="'Item11447' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item11447</noautolink></a> - "noform" examples not working - add comment_target parameter. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 2.0.1 (15 Jan 2012) </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item11443' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item11443"><noautolink>Foswikitask:Item11443</noautolink></a> - better handling if target topic or web do not exist. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 10 Apr 2011 </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item10263' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item10263"><noautolink>Foswikitask:Item10263</noautolink></a> - remove wrap="soft" to make templates validate. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 19 Nov 2010 </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item10050' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item10050"><noautolink>Foswikitask:Item10050</noautolink></a> - <a href="CommentPlugin.html" class="foswikiCurrentTopicLink">CommentPlugin</a> prompt must not add newlines that prevent COMMENT inside TML tables </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 21 Oct 2010 </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a href="https://foswiki.org/Tasks/Item3499" class="interwikiLink" title="'Item3499' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item3499</noautolink></a> - support COMMENT (and other) ACL preferences<br />                 <a class="interwikiLink" href="https://foswiki.org/Tasks/Item9592" title="'Item9592' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item9592</noautolink></a> - added AJAX example<br />                 <a class="interwikiLink" href="https://foswiki.org/Tasks/Item9601" title="'Item9601' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item9601</noautolink></a> - Prevent uprev of topic for every comment<br />                 <a class="interwikiLink" href="https://foswiki.org/Tasks/Item4423" title="'Item4423' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item4423</noautolink></a> - Spreadsheet calculations do not execute within comment templates<br />                 <a title="'Item9568' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item9568"><noautolink>Foswikitask:Item9568</noautolink></a> (and others) - Redesigned core. Change commonTagsHandler to registered COMMENT macro, convert to REST handler instead of save script with beforeSaveHandler<br />                 <a title="'Item5897' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item5897"><noautolink>Foswikitask:Item5897</noautolink></a> - if COMMENT target topic is missing, it should be created. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 21 Oct 2010 </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item9857' on the 'Foswiki' issue tracking site" href="https://foswiki.org/Tasks/Item9857" class="interwikiLink"><noautolink>Foswikitask:Item9857</noautolink></a> - Restored the CommentPluginTemplate to how it was before. All the changes done to make it look nice causes many errors. Never again add newlines, never again add trailing \ on existing templates. It does not always work. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 31 Jul 2010 </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item9415' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item9415"><noautolink>Foswikitask:Item9415</noautolink></a> - Documentation updates </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 27 May 2010 </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Moved example topic <a href="../Sandbox/CommentPluginExamples.html">CommentPluginExamples</a> to Sandbox web. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 24 Feb 2010 </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item8611' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item8611"><noautolink>Foswikitask:Item8611</noautolink></a> - block comments resulting from calls to saveTopic from within an afterSaveHandler </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 12 Sep 2009 </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item8269' on the 'Foswiki' issue tracking site" href="https://foswiki.org/Tasks/Item8269" class="interwikiLink"><noautolink>Foswikitask:Item8269</noautolink></a> - Targeting anchors broken by Item727 is fixed. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 04 Jun 2009 </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item1668' on the 'Foswiki' issue tracking site" href="https://foswiki.org/Tasks/Item1668" class="interwikiLink"><noautolink>Foswikitask:Item1668</noautolink></a> - The action template used with ActionTrackerPlugin now uses new syntax ending with %ENDACTION. This makes each action item appear on a new line. Additionally new lines are now correctly saved as html br tags and not as html encoded br tag <br /> <a href="https://foswiki.org/Tasks/Item1640" class="interwikiLink" title="'Item1640' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item1640</noautolink></a> - Templates shipped with the plugin no longer encodes the user date entered when the date is saved so that it is possible for the user to use macros. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 15 Jan 2008 </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a class="interwikiLink" href="https://foswiki.org/Tasks/Item727" title="'Item727' on the 'Foswiki' issue tracking site"><noautolink>Foswikitask:Item727</noautolink></a> - data loss issue when missing anchor or location </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 13 Jan 2009 </td>
			<td class="foswikiTableCol1 foswikiLastCol"> <a title="'Item736' on the 'Foswiki' issue tracking site" class="interwikiLink" href="https://foswiki.org/Tasks/Item736"><noautolink>Foswikitask:Item736</noautolink></a> - Make CommentPlugin aware of <a href="CompareRevisionsAddOn.html">CompareRevisionsAddOn</a> bin script. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol" style="text-align:right"> 16 Dec 2008 </td>
			<td class="foswikiTableCol1 foswikiLastCol"> Foswiki version </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast" style="text-align:right"> 06 Mar 2002 </td>
			<td class="foswikiTableCol1 foswikiLastCol foswikiLast"> initial commit </td>
		</tr>
	</tbody></table>
<p></p>
<p></p>
<hr />
<p></p>
<hr />
<p></p>
</body>