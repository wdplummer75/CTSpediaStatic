/**************************************************************************
 CORONNA  -   Chris 
 Program:     buildfile
 Purpose:     
 Programmer:  Kimberly Johnson
 Date:        9/30/08 
 Comments:  If two observations match on the variables listed; then the log will 
            indicate how many observation matched between the two groups. In this 
            example, 27 patients from both groups matched on gender, ac, and dur.

            NOTE: There were 27 observations read from the data set WORK.GRP1_4.
            NOTE: There were 27 observations read from the data set WORK.GRP2_4.
            NOTE: The data set SAVE.MATCHED_SAMPLE has 54 observations and 6 variables.
            NOTE: DATA statement used (Total process time):
     MLOGIC(MATCHED_SAMPLE):  Ending execution.
            
 Change History: 
   10/01/08:  Created, copied from matched.sas.
***************************************************************************/ 
data sample;
input GENDER    SMOKER    group    ac    dur    ptid;    
datalines;
                          1         0        0      10     11      1
                          0         0        0       8     10      2
                          0         0        0      12      9      3
                          1         0        0       8      1      4
                          1         0        0      12      7      5
                          1         0        0      12     10      6
                          1         .        0       7      4      7
                          1         1        0       8      7      8
                          1         0        0      11      7      9
                          1         0        0      12      5     10
                          1         0        0      11      3     11
                          1         0        0       7      7     12
                          1         0        0       7      8     13
                          1         0        0      11     13     14
                          0         0        0      12      9     15
                          1         0        0       6     12     16
                          1         0        0      14      7     17
                          1         0        0      12      2     18
                          0         0        0      12      1     19
                          1         0        0      14      8     20
                          1         0        0      12      6     21
                          1         0        0      11      8     22
                          1         1        0       1      8     23
                          1         0        0       6      9     24
                          0         0        0       5     10     25
                          0         0        0      11      9     26
                          1         0        0      14      2     27
                          0         .        0       1     12     28
                          0         0        0       9      7     29
                          0         0        0       9      7     30
                          0         0        0      12     10     31
                          1         0        0       9     12     32
                          1         0        0       8     10     33
                          0         0        0       7     11     34
                          0         1        0       7     10     35
                          1         0        0       7      7     36
                          1         0        0       6      4     37
                          1         0        0       6      9     38
                          0         0        0      11     10     39
                          1         0        0       2      1     40
                          1         1        0      13      9     41
                          1         0        0       9      1     42
                          0         0        0       9      9     43
                          1         0        0       9      9     44
                          1         .        0      11     10     45
                          0         0        0       7      8     46
                          1         0        0       8      9     47
                          1         0        0       7      7     48
                            1         0        0       5      7     49
                            1         0        0       8      8     50
                            1         0        0       8      8     51
                            1         1        0       7      7      52
                            1         1        0       5      7      53
                             .         .        0       1      9      54
                             1         1        0      10     10      55
                             1         .        0      11     12      56
                             1         0        0       6      3      57
                             1         0        0       8      6      58
                             0         1        0       6      4      59
                             1         0        0      10      7      60
                             0         0        0       9      7      61
                             1         0        0      10      3      62
                             1         0        0      14      2      63
                             1         .        0       1      8      64
                             1         1        0      14      6      65
                             0         0        0      11      7      66
                             0         0        0       3      5      67
                             1         0        0      14      7      68
                             1         .        0      10     10      69
                             1         0        0      12      1      70
                             1         1        0      10      9      71
                             1         0        0       9      8      72
                             1         1        0      10      3      73
                             1         0        0      13     10      74
                             1         0        0       7      8      75
                             1         0        0      12      6      76
                             1         0        0      14      8      77
                             0         0        0      10      7      78
                             1         0        0      13      9      79
                             1         0        0       8      8      80
                             1         0        0       5      6      81
                             1         0        0      10      9      82
                             0         0        0      12      8      83
                             1         .        0      12     11      84
                             1         0        0      12     13      85
                             1         0        0       8      2      86
                             1         1        0      11      7      87
                             1         0        0      13      3      88
                             0         0        0      10      8      89
                             1         1        0      11      9      90
                             1         0        0      12      9      91
                             1         0        0       8      3      92
                             1         .        0       9      1      93
                             1         0        0       5      7      94
                             0         0        0       8      2      95
                             1         0        0      10      9      96
                             1         0        0      11      7      97
                             0         0        0      10      9      98
                             0         0        0      13      8      99
                            1         0        0      10      7     100
                            1         0        1       9      6    8285
                            0         0        1       2      8    8286
                            0         0        1       7      7    8287
                            1         0        1       6      2    8288
                            1         0        1       3      2    8289
                            0         0        1       9      3    8290
                            1         0        1       6      7    8291
                            0         0        1      11      9    8292
                            0         0        1       8      8    8293
                            1         0        1       7      9    8294
                            0         0        1       9      9    8295
                            0         0        1      14      7    8296
                            0         0        1       9      1    8297
                            0         0        1      12      9    8298
                            1         0        1       6      3    8299
                            1         0        1      11      2    8300
                            1         0        1       8      4    8301
                            0         0        1       9      8    8302
                            1         .        1      14      7    8303
                            0         1        1       6      7    8304
                            1         0        1       9      6    8305
                            0         0        1       8      3    8306
                            0         0        1       8      1    8307
                            1         0        1       5      5    8308
                            1         0        1      12      7    8309
                            0         0        1       8     10    8310
                            1         0        1      10     11    8311
                            0         0        1       8      1    8312
                            1         0        1       8     11    8313
                            0         0        1       9      2    8314
                            0         0        1       7      7    8315
                            1         0        1       7      2    8316
                            0         0        1       9      2    8317
                            1         0        1       8     10    8318
                            0         0        1       8      9    8319
                            0         0        1       6      4    8320
                            1         0        1       7      8    8321
                            0         0        1       7      7    8322
                            1         1        1       5      1    8323
                            0         0        1       9      3    8324
                            0         0        1       8      8    8325
                            1         0        1       5      3    8326
                            1         1        1       5      3    8327
                            1         0        1      11      4    8328
                            1         .        1      10      7    8329
                            1         1        1       8      7    8330
                            0         1        1       9      5    8331
                            1         0        1      12      7    8332
                            1         0        1       8      8    8333
                            0         0        1       8      6    8334
                            0         1        1       7      7    8335
                            1         1        1       9      1    8336
                            0         0        1       9      9    8337
                            1         1        1       7      8    8338
                            0         0        1       9      8    8339
                            0         0        1      11      4    8340
                            0         0        1       5      2    8341
                            0         0        1       9     11    8342
                            1         1        1       6      7    8343
                            1         0        1       8     12    8344
                            0         1        1       6      3    8345
                            1         0        1      11     13    8346
                            1         0        1       5      3    8347
                            1         0        1       8      1    8348
                            0         0        1       5      5    8349
                            1         0        1      11      8    8350
                            0         0        1       7      8    8351
                            1         1        1       1      1    8352
                            1         0        1       5      1    8353
                            0         1        1       8     10    8354
                            1         0        1      10      7    8355
                            1         0        1      10      1    8356
                            0         0        1      14     12    8357
                            0         0        1       8      4    8358
                            0         0        1       7      5    8359
                            0         0        1      10      5    8360
                            1         1        1       8      1    8361
                            0         1        1       9      7    8362
                            1         1        1       6     10    8363
                            0         0        1       4      8    8364
                            1         0        1       8      5    8365
                            0         0        1       6      7    8366
                            0         0        1       8      8    8367
                            1         0        1       7      9    8368
                            1         0        1      12      6    8369
                            1         0        1       7      7    8370
                            1         1        1       6      8    8371
                            1         0        1       8      8    8372
                            1         0        1       7      7    8373
                            0         1        1      11      4    8374
                            1         .        1       9      8    8375
                            1         .        1      13     11    8376
                            0         0        1       8      7    8377
                            0         0        1       7      9    8378
                            1         0        1       4      9    8379
                            0         .        1       6      9    8380
                            1         1        1       4      9    8381
                            0         0        1       7      7    8382
                            0         0        1      12      2    8383
                            1         0        1      10      2    8384
;
run;

options mlogic mprint ;
filename matched  "http://www.ctspedia.org/wiki/pub/CTSpedia/matched_sample/matched_sample.sas";

%include matched;

*Example:  match two groups by 3 variables;
%matched_sample(sample, group, ptid, gender ac dur, dur);

*Another example:  match two groups by 4 variables;
*%matched_sample(save.sample, group, ptid, gender ac dur smoker, smoker);
